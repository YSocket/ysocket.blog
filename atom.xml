<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <author>
    <name>YSocket</name>
  </author>
  <generator uri="https://hexo.io/">Hexo</generator>
  <id>http://ysocket.pages.dev/</id>
  <link href="http://ysocket.pages.dev/" rel="alternate"/>
  <link href="http://ysocket.pages.dev/atom.xml" rel="self"/>
  <rights>All rights reserved 2026, YSocket</rights>
  <subtitle>YSocket's Blog</subtitle>
  <title>YSocket's Blog</title>
  <updated>2026-02-25T06:38:48.464Z</updated>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="doh" scheme="http://ysocket.pages.dev/tags/doh/"/>
    <content>
      <![CDATA[<p>这是一个非常实用的技术话题！通过 Cloudflare Zero Trust 的功能，我们可以获取到一个独享的、不被墙的 DoH 地址，完美解决官方 <code>one.one.one.one</code> 在国内部分网络环境下无法访问的问题。</p><p>以下是为您撰写的博客文章草稿：<br>在国内上网，我们经常会遇到 DNS 污染或者官方 DNS 服务器（如 <code>one.one.one.one</code>）无法连接的问题。这不仅导致网页打不开，还可能带来隐私泄露的风险。</p><p>今天，我将教你一个“骚操作”：利用 Cloudflare 的 Zero Trust 服务，免费创建一个<strong>独享的、全球可访问</strong>的 DNS over HTTPS (DoH) 服务器。这个地址不仅不仅独属于你，而且能有效解决官方地址被屏蔽的烦恼！</p><h2 id="为什么选择这个方案？"><a href="#为什么选择这个方案？" class="headerlink" title="为什么选择这个方案？"></a>为什么选择这个方案？</h2><ol><li><strong>完全免费</strong>：Cloudflare 提供的这项服务对个人用户免费。</li><li><strong>独享地址</strong>：你将获得一个形如 <code>https://xxxxxx.cloudflare-gateway.com/dns-query</code> 的专属地址，不像公共 DNS 那样拥挤。</li><li><strong>抗干扰</strong>：官方的 <code>one.one.one.one</code> 经常被阻断，但 Cloudflare Gateway 的随机域名通常可以畅通无阻。</li><li><strong>隐私安全</strong>：加密传输，防止运营商劫持和窥探。</li></ol><h2 id="具体操作步骤"><a href="#具体操作步骤" class="headerlink" title="具体操作步骤"></a>具体操作步骤</h2><p>准备工作：你需要一个 Cloudflare 账号。如果没有，请先注册一个。</p><h3 id="第一步：进入控制面板"><a href="#第一步：进入控制面板" class="headerlink" title="第一步：进入控制面板"></a>第一步：进入控制面板</h3><ol><li>登录你的 Cloudflare 账号。</li><li>在浏览器地址栏直接访问 Cloudflare Zero Trust 的仪表盘：<br> <strong><a href="https://one.dash.cloudflare.com/">https://one.dash.cloudflare.com/</a></strong></li></ol><h3 id="第二步：找到“解析程序和代理”"><a href="#第二步：找到“解析程序和代理”" class="headerlink" title="第二步：找到“解析程序和代理”"></a>第二步：找到“解析程序和代理”</h3><p>进入仪表盘后，点击左侧菜单栏：</p><ol><li>点击 <strong>“网络”</strong>。</li><li>在展开的子菜单中，找到并点击 <strong>“解析程序和代理”</strong>。</li></ol><h3 id="第三步：配置-DNS-位置"><a href="#第三步：配置-DNS-位置" class="headerlink" title="第三步：配置 DNS 位置"></a>第三步：配置 DNS 位置</h3><p>在“解析程序和代理”页面中，你会看到 <strong>DNS 位置</strong> 选项卡。</p><ol><li>点击默认的位置名称：<strong>Default Location</strong>。</li><li>点击右侧或旁边的 <strong>“配置”</strong> 按钮。</li></ol><h3 id="第四步：开启-DoH-并获取地址"><a href="#第四步：开启-DoH-并获取地址" class="headerlink" title="第四步：开启 DoH 并获取地址"></a>第四步：开启 DoH 并获取地址</h3><p>进入配置页面后，你会看到类似下方的界面设置。请按照以下说明操作：</p><p><strong>1. 启用 IPv6 DNS（可选但推荐）</strong><br>在 “DNS endpoints” 区域，找到 <strong>IPv6 DNS</strong> 并将其开关打开。<br><em>注意：系统会为你分配一个 IPv6 阻止列表 ID，例如 <code>2a06:98c1:54::2:3ac6</code>，这通常无需更改。</em></p><p><strong>2. 开启基于 HTTPS 的 DNS (DoH)</strong><br>这是最关键的一步！找到 <strong>“基于 HTTPS 的 DNS (DoH)”</strong> 选项。</p><ul><li>将开关设置为 <strong>“开”</strong>。</li><li>此时，系统会自动生成一个专属的 DoH 地址。</li></ul><p><strong>界面参考示例：</strong></p><blockquote><p><em>基于 HTTPS 的 DNS (DoH)</em><br><em>开</em><br><em><code>https://**********.cloudflare-gateway.com/dns-query</code></em></p></blockquote><blockquote><p><strong>注意</strong>：上图中的 <code>**********</code> 是随机生成的字符，<strong>请复制你自己在页面上看到的那个地址</strong>。这就是你独享的 DoH 服务器地址！</p></blockquote><p><strong>3. 保存设置</strong><br>不要忘记滚动到页面底部，点击 <strong>“保存”</strong> 按钮。</p><h3 id="第五步：设置为默认位置（可选）"><a href="#第五步：设置为默认位置（可选）" class="headerlink" title="第五步：设置为默认位置（可选）"></a>第五步：设置为默认位置（可选）</h3><p>在页面下方的“默认 DNS 位置”区域，如果需要，你可以勾选“设置为默认 DNS 位置”。这通常用于 Cloudflare WARP 客户端的设备策略，如果你只是在浏览器或路由器使用该 DoH 地址，这一步可以跳过。</p><hr><h2 id="如何使用这个独享-DoH-地址？"><a href="#如何使用这个独享-DoH-地址？" class="headerlink" title="如何使用这个独享 DoH 地址？"></a>如何使用这个独享 DoH 地址？</h2><p>成功获取地址后（例如 <code>https://**********.cloudflare-gateway.com/dns-query</code>），你可以在任何支持 DoH 的设备上配置它。</p><h3 id="方法-1：浏览器配置（以-Chrome-为例）"><a href="#方法-1：浏览器配置（以-Chrome-为例）" class="headerlink" title="方法 1：浏览器配置（以 Chrome 为例）"></a>方法 1：浏览器配置（以 Chrome 为例）</h3><ol><li>打开 Chrome 设置 -&gt; 隐私和安全 -&gt; 安全。</li><li>滚动到底部，找到“使用安全 DNS”。</li><li>选择“使用”，并在下拉菜单中选择“自定义”。</li><li>粘贴你的 DoH 地址：<code>https://你的前缀.cloudflare-gateway.com/dns-query</code>。</li><li>保存即可。</li></ol><h3 id="方法-2：路由器-网关配置"><a href="#方法-2：路由器-网关配置" class="headerlink" title="方法 2：路由器&#x2F;网关配置"></a>方法 2：路由器&#x2F;网关配置</h3><p>如果你使用的是 OpenWrt、Padavan 或其他高阶路由器固件，可以在 DNS 设置中找到 DoH (DNS over HTTPS) 客户端选项，填入上述地址，即可实现全家网络 DNS 无污染。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过这个方法，你不仅拥有了一个<strong>全球可访问</strong>的 DNS 服务器，还完美规避了 <code>one.one.one.one</code> 打不开的问题。Cloudflare 强大的全球网络能保证低延迟和高可用性。</p><p>赶紧去试试吧，享受干净、私密的上网体验！</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2026/02/25/create-dns-server-with-cloudflare/</id>
    <link href="http://ysocket.pages.dev/2026/02/25/create-dns-server-with-cloudflare/"/>
    <published>2026-02-25T06:38:00.000Z</published>
    <summary>
      <![CDATA[<p>这是一个非常实用的技术话题！通过 Cloudflare Zero Trust 的功能，我们可以获取到一个独享的、不被墙的 DoH 地址，完美解决官方 <code>one.one.one.one</code> 在国内部分网络环境下无法访问的问题。</p>
<p>以下是为您撰写]]>
    </summary>
    <title>告别 DNS 污染与封锁：手把手教你免费搭建独享 Cloudflare DoH 服务器</title>
    <updated>2026-02-25T06:38:48.464Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="stock" scheme="http://ysocket.pages.dev/categories/stock/"/>
    <category term="stockBroker" scheme="http://ysocket.pages.dev/tags/stockBroker/"/>
    <content>
      <![CDATA[<p>第一证券: <em>400-685-8589</em><br>必贝：<em>400-707-1292</em><br>嘉信：<em>400-120-6217</em></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2026/02/25/stockBroker-service-teleNo/</id>
    <link href="http://ysocket.pages.dev/2026/02/25/stockBroker-service-teleNo/"/>
    <published>2026-02-25T04:48:00.000Z</published>
    <summary>
      <![CDATA[<p>第一证券: <em>400-685-8589</em><br>必贝：<em>400-707-1292</em><br>嘉信：<em>400-120-6217</em></p>]]>
    </summary>
    <title>券商客服电话</title>
    <updated>2026-02-25T04:51:06.657Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="docker" scheme="http://ysocket.pages.dev/tags/docker/"/>
    <content>
      <![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>在 Mac 中使用 Docker 时，需要安装和使用 Docker Desktop，比较吃性能，所以在本地一般没有怎么用起来。</p><p>OrbStack 是原生Swift应用，快速、轻便、简单。需注意，免费版仅适合个人非商用目的。下载安装包即可使用，或通过 brew 安装，有 Apple Silicon 芯片的版本。</p><p>官网地址： <a href="https://orbstack.dev/">https://orbstack.dev/</a></p><p>在 Docker 栏内，有 containers 容器，数据卷 volume，images 镜像这几个标签。</p><h2 id="创建与使用-volume"><a href="#创建与使用-volume" class="headerlink" title="创建与使用 volume"></a>创建与使用 volume</h2><p>比起挂载在任意的文件，使用 volume 有特殊优化处理。</p><p>可以通过 UI 界面创建，创建一个 nginx-file 的卷，即 <code>docker volume create nginx-file</code> 。</p><p>可直接在 UI 界面打开 volume 文件位置，往里面操作文件。</p><h2 id="安装镜像、创建容器"><a href="#安装镜像、创建容器" class="headerlink" title="安装镜像、创建容器"></a>安装镜像、创建容器</h2><p>软件内不包含这些可视化功能，需要通过命令行操作，如</p><ul><li>查找镜像与用法</li><li>安装镜像，如 <code>docker pull nginx</code></li><li>创建容器，使用 volume 名称作为源而不是路径，如 <code>docker run --name=nginx -p 80:80 -v nginx-file:/usr/share/nginx/html -d nginx</code></li></ul><p>运行镜像后，访问 <code>http://localhost/index.html</code> 发现已经可以看到 nginx 的示例页面了。</p><h2 id="容器管理"><a href="#容器管理" class="headerlink" title="容器管理"></a>容器管理</h2><p>UI 界面中的容器管理中功能就比较多了：</p><ul><li>启动、关闭、杀容器等</li><li>删除容器</li><li>查看信息，能看到容器 ID、已映射端口、已挂载到本地的目录等</li><li>查看日志</li><li>进入终端</li></ul><h2 id="配置-daemon-json"><a href="#配置-daemon-json" class="headerlink" title="配置 daemon.json"></a>配置 daemon.json</h2><p>可以通过运行 <code>orb config docker</code> 来编辑配置，或直接编辑 <code>~/.orbstack/config/docker.json</code> 文件。</p><p>然后使用 <code>orb restart docker</code> 重新启动 docker。</p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>进行了一系列的小试验后，整体软件的内存占用还不到 1bg，速度也快。</p><p>非常值得一试，在我的这个 16g 小内存的 Macbook Air 中，Docker 可能也可以用起来了。</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2025/07/13/OrbStack-Mac/</id>
    <link href="http://ysocket.pages.dev/2025/07/13/OrbStack-Mac/"/>
    <published>2025-07-13T13:37:00.000Z</published>
    <summary>
      <![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>在 Mac 中使用 Docker 时，需要安装和使用 Docker Desktop，比较吃性能，所以在本地一般没有怎么用起来。</p>
<p]]>
    </summary>
    <title>OrbStack:Mac下更快的 Docker 容器运行环境</title>
    <updated>2025-07-13T13:37:48.729Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="DNS" scheme="http://ysocket.pages.dev/categories/DNS/"/>
    <category term="DNS" scheme="http://ysocket.pages.dev/tags/DNS/"/>
    <content>
      <![CDATA[<p>最近折腾了一下在 MacOS 本地搭建 DoH，把折腾过程记录一下。</p><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><ul><li>什么是 DoH</li></ul><p>   什么是 DoH，可以看：<a href="https://zh.wikipedia.org/zh-cn/DNS_over_HTTPS%E3%80%82">https://zh.wikipedia.org/zh-cn/DNS_over_HTTPS。</a></p><ul><li><p>使用 smartdns-rs<br>smartdns-rs 是一个用 Rust 编写的跨平台本地DNS服务器，获取最快的网站IP，获得最佳上网体验，支持DoH，DoT。</p></li><li><p>开源在 GitHub: <a href="https://github.com/mokeyish/smartdns-rs">https://github.com/mokeyish/smartdns-rs</a><br>使用这个软件可以非常方便的使用 DoH。</p></li></ul><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>如果你有安装 brew ，可以直接用下面的命令进行安装。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">brew update<br>brew install smartdns<br></code></pre></td></tr></table></figure><p>注意：监听 53 端口需要 <code>root</code> 权限，因此需要 <code>sudo</code>。</p><p>  <code>brew</code> 安装的 <code>smartdns</code> 的命令 <code>sudo smartdns service start</code> 与 <code>sudo brew services start smartdns</code> 一样。</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>下面是一份最简单的示例配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs conf"># 在本地 53 端口监听<br>bind 127.0.0.1:53  <br><br># 配置 bootstrap-dns，如不配置则调用系统的，建议配置，这样就加密了。<br>server https://223.5.5.5/dns-query  -bootstrap-dns -exclude-default-group<br><br># 配置默认上游服务器<br>server https://dns.alidns.com/dns-query<br>server https://doh.pub/dns-query<br><br># 配置公司（家里）上游服务器<br>server 192.168.1.1 -exclude-default-group -group office<br><br># 以 ofc 结尾的域名转发至 office 分组进行解析<br>nameserver /ofc/office<br><br># 设置域名的静态 IP<br>address /test.example.com/1.2.3.5<br><br># 屏蔽域名（广告屏蔽）<br>address /ads.example.com/#<br><br># 以下特性在[C 语言版 SmartDNS](https://github.com/pymumu/smartdns) 尚未支持，仅适用于SmartDNS-rs<br># 使用 DoH3<br>server-h3 223.5.5.5<br><br># 使用 DoQ<br>server-quic 223.5.5.5<br></code></pre></td></tr></table></figure><p>更多高级的配置请参考 <a href="https://github.com/pymumu/smartdns/blob/doc/docs/configuration.md">这里</a></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2025/06/16/Mac-smartdns-DOH/</id>
    <link href="http://ysocket.pages.dev/2025/06/16/Mac-smartdns-DOH/"/>
    <published>2025-06-16T01:44:00.000Z</published>
    <summary>
      <![CDATA[<p>最近折腾了一下在 MacOS 本地搭建 DoH，把折腾过程记录一下。</p>
<h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><ul>
<li>什么是 DoH</li>
</ul>
<p>]]>
    </summary>
    <title>MacOS 配置 DNS Over HTTPS</title>
    <updated>2025-06-16T01:55:44.807Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="feign" scheme="http://ysocket.pages.dev/categories/feign/"/>
    <category term="feign" scheme="http://ysocket.pages.dev/tags/feign/"/>
    <category term="spring cloud" scheme="http://ysocket.pages.dev/tags/spring-cloud/"/>
    <content>
      <![CDATA[<h5 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h5><p>最近在使用 @RequestParam、@RequestBody 注解定义 feign 接口的时候出现一些使用上的问题，造成调用方启动的时候会报错</p><h5 id="详细情况"><a href="#详细情况" class="headerlink" title="详细情况"></a>详细情况</h5><p>1.第一种情况，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/hello2&quot;)</span><br>BetaDto <span class="hljs-title function_">hello2</span><span class="hljs-params">(String name1)</span>;<br></code></pre></td></tr></table></figure><p>接口有且只有一个 key&#x2F;value 参数，此时可以不必在 name1 参数上使用 @RequestParam 注解。通过 Feign 调用该接口的调用方可以正常启动。</p><p>2.第二种情况，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/hello2&quot;)</span><br>BetaDto <span class="hljs-title function_">hello2</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String name1)</span>;<br></code></pre></td></tr></table></figure><p>接口有且只有一个 key&#x2F;value 参数，此时如果对 name1 参数上使用 @RequestParam 注解，此时通过 Feign 调用该接口的调用方可启动的时候回抛出如下错误：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">Caused <span class="hljs-keyword">by</span>: java.lang.IllegalStateException: RequestParam.<span class="hljs-built_in">value</span>() was <span class="hljs-literal">empty</span> <span class="hljs-keyword">on</span> <span class="hljs-title">parameter</span> <span class="hljs-title">0</span><br></code></pre></td></tr></table></figure><p>意思是 @RequestParam 的 value 值不允许为空，正确的姿势如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/hello2&quot;)</span><br>BetaDto <span class="hljs-title function_">hello2</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;name1&quot;)</span> String name1)</span>;<br></code></pre></td></tr></table></figure><p>3.第三种情况，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/hello2&quot;)</span><br>BetaDto <span class="hljs-title function_">hello2</span><span class="hljs-params">(String name1, String name2)</span>;<br></code></pre></td></tr></table></figure><p>接口存在多个 key&#x2F;value 参数，此时通过 Feign 调用该接口的调用方启动的时候会抛出如下错误：</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">Caused <span class="hljs-keyword">by</span>: java.lang.IllegalStateException: <span class="hljs-keyword">Method</span> <span class="hljs-title function_">has</span> <span class="hljs-title function_">too</span> <span class="hljs-title function_">many</span> <span class="hljs-title function_">Body</span> <span class="hljs-title function_">parameters</span><br></code></pre></td></tr></table></figure><p>像这种多参数（key&#x2F;value）的情况必须为每个参数增加 @RequestParam 注解，正确的姿势如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/hello2&quot;)</span><br>BetaDto <span class="hljs-title function_">hello2</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(“name1”)</span>  String name1, <span class="hljs-meta">@RequestParam(“name2”)</span>  String name2)</span>;<br></code></pre></td></tr></table></figure><h5 id="终极办法："><a href="#终极办法：" class="headerlink" title="终极办法："></a>终极办法：</h5><p>在pom.xml的maven-compiler-plugin插件中添加配置parameters</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">parameters</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">parameters</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Spring框架<br>SpringBoot项目如果继承自spring-boot-starter-parent，会默认开启。</p><p><img src="/images/pasted-27.png" alt="upload successful"></p><p>来自：<a href="https://blog.csdn.net/yangchao1125/article/details/104356936">Feign 中使用 @RequestParam、@RequestBody 的正确姿势</a></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/12/12/FeignClient-RequestParam-value-was-empty/</id>
    <link href="http://ysocket.pages.dev/2023/12/12/FeignClient-RequestParam-value-was-empty/"/>
    <published>2023-12-12T08:13:00.000Z</published>
    <summary>
      <![CDATA[<h5 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h5><p>最近在使用 @RequestParam、@RequestBody 注解定义 feign 接口的时候出现一些使用上的问题，造成调用方启动的时候]]>
    </summary>
    <title>@FeignClient导致 RequestParam.value() was empty</title>
    <updated>2025-05-16T14:43:16.187Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="spring cloud" scheme="http://ysocket.pages.dev/categories/spring-cloud/"/>
    <category term="spring cloud" scheme="http://ysocket.pages.dev/tags/spring-cloud/"/>
    <content>
      <![CDATA[<h4 id="关于A-method-overriding-another-method-must-not-redefine-the-parameter-constraint-configuration解决方法"><a href="#关于A-method-overriding-another-method-must-not-redefine-the-parameter-constraint-configuration解决方法" class="headerlink" title="关于A method overriding another method must not redefine the parameter constraint configuration解决方法"></a>关于A method overriding another method must not redefine the parameter constraint configuration解决方法</h4><ul><li>使用的@Validated校验参数接口参数和实现类参数要保持一直，不然会报错。</li><li>接口:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FeignClient(name = &quot;enroll&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EduBatchApi</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取招生批次详细信息</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 主键</span><br><span class="hljs-comment">     */</span><br>    R&lt;EduBatchVo&gt; <span class="hljs-title function_">getInfo</span><span class="hljs-params">(<span class="hljs-meta">@NotNull(message = &quot;主键不能为空&quot;)</span> <span class="hljs-meta">@PathVariable</span> String id)</span>;<br></code></pre></td></tr></table></figure><ul><li>实现类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EduBatchController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">EduBatchApi</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IEduBatchService iEduBatchService;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取招生批次详细信息</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 主键</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> R&lt;EduBatchVo&gt; <span class="hljs-title function_">getInfo</span><span class="hljs-params">(<span class="hljs-meta">@NotNull(message = &quot;主键不能为空&quot;)</span> <span class="hljs-meta">@PathVariable</span> String id)</span> &#123;<br>        <span class="hljs-keyword">return</span> R.success(iEduBatchService.queryById(id));<br>    &#125;<br></code></pre></td></tr></table></figure>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/11/11/A-method-overriding-another-method-must-not-redefine-the-parameter-constraint-configuration/</id>
    <link href="http://ysocket.pages.dev/2023/11/11/A-method-overriding-another-method-must-not-redefine-the-parameter-constraint-configuration/"/>
    <published>2023-11-11T07:53:00.000Z</published>
    <summary>
      <![CDATA[<h4 id="关于A-method-overriding-another-method-must-not-redefine-the-parameter-constraint-configuration解决方法"><a href="#关于A-method-overriding-a]]>
    </summary>
    <title>关于A method overriding another method must not redefine the parameter constraint configuration解决方法</title>
    <updated>2025-05-16T14:43:16.186Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="springboot rabbitmq" scheme="http://ysocket.pages.dev/categories/springboot-rabbitmq/"/>
    <category term="rabbitmq" scheme="http://ysocket.pages.dev/tags/rabbitmq/"/>
    <content>
      <![CDATA[<h4 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h4><p>RabbitMQ 是一个消息队列，说到消息队列，大家可能多多少少有听过，它主要的功能是用来实现应用服务的异步与解耦，同时也能起到削峰填谷、消息分发的作用。<br>消息队列在比较主要的一个作用是用来做应用服务的解耦，消息从消息的生产者传递到消息队列，消费者从消息队列中获取消息并进行消费，生产者不需要管是谁在消费消息，消费者也无需关注消息是由谁来生产的。在分布式的系统中，消息队列也会被用在其他地方，比如分布式事务的支持，代表如阿里开源的 RocketMQ 。<br>当然，我们本篇文章的主角还是 RabbitMQ 。</p><p>原文链接： <a href="https://juejin.cn/post/6844903966531125262">Spring Boot 整合 RabbitMQ</a></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/09/13/springboot-rabbitmq-01/</id>
    <link href="http://ysocket.pages.dev/2023/09/13/springboot-rabbitmq-01/"/>
    <published>2023-09-13T08:19:00.000Z</published>
    <summary>
      <![CDATA[<h4 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h4><p>RabbitMQ 是一个消息队列，说到消息队列，大家可能多多少少有听过，它主要的功能是用来实现应用服务的异步与解耦，同时]]>
    </summary>
    <title>Spring Boot 整合 RabbitMQ</title>
    <updated>2025-05-16T14:43:16.190Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <content>
      <![CDATA[<h4 id="理解-RabbitMQ-Exchange"><a href="#理解-RabbitMQ-Exchange" class="headerlink" title="理解 RabbitMQ Exchange"></a>理解 RabbitMQ Exchange</h4><p>原文链接：</p><p><a href="https://zhuanlan.zhihu.com/p/37198933">理解 RabbitMQ Exchange</a></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/09/12/know-rabbitmq-exchange/</id>
    <link href="http://ysocket.pages.dev/2023/09/12/know-rabbitmq-exchange/"/>
    <published>2023-09-12T09:28:37.000Z</published>
    <summary>
      <![CDATA[<h4 id="理解-RabbitMQ-Exchange"><a href="#理解-RabbitMQ-Exchange" class="headerlink" title="理解 RabbitMQ Exchange"></a>理解 RabbitMQ Exchange</h4><]]>
    </summary>
    <title>理解 RabbitMQ Exchange</title>
    <updated>2025-05-16T14:43:16.189Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="spring cloud config" scheme="http://ysocket.pages.dev/categories/spring-cloud-config/"/>
    <category term="spring cloud" scheme="http://ysocket.pages.dev/tags/spring-cloud/"/>
    <content>
      <![CDATA[<p>引用spring cloud config时，Spring cloud默认以远程配置为最高优先级，如果希望本地的配置文件（如application.yml或bootstrap.yml）的某些属性能覆盖远程的同名属性值，则需要在远程配置文件增加以下属性配置（以下所述属性均在PropertySourceBootstrapProperties）：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">config:</span><br>      <span class="hljs-attr">overrideNone:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>该配置的含义是远程配置不覆盖本地配置（双重否定？太有才了）</p><p>true表示远程配置不覆盖本地同名属性</p><p>false表示远程配置覆盖本地同名属性 默认为false,（远程配置同名属性覆盖本地配置同名属性）</p><p>注意：<strong>该属性参数值需要配置在远程配置文件中</strong>，配置在本地配置文件不生效（如application.yml或bootstrap.yml）</p><p>该设置为true，则外部属性（指远程配置）具有最低的优先级，不覆盖任何本地已经存在的属性配置值。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">config:</span><br>      <span class="hljs-attr">allowOverride:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>该配置的含义是远程配置是否允许被本地属性覆盖 默认true, <strong>该属性必须配置在远程配置</strong>（在本地配置该属性是不能生效的），<strong>该参数默认为true不需要特别设置</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">config:</span><br>      <span class="hljs-attr">overrideSystemProperties:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>该配置的含义是远程是否覆盖系统配置 默认true, <strong>该属性必须配置在远程配置中</strong>（在本地配置该属性是不能生效的）。例如，如果希望在启动时可能通过环境变量或程序参数修改某个配置，需要将该属性在远程配置中设置为false。</p><p>例：系统配置指通过命令行参数或环境变量方式 指定配置属性值.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">java –jar xxx.jar --spring.cloud.stream.bindings. BusInput.group= collector-local<br></code></pre></td></tr></table></figure>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/09/12/spring-config-override/</id>
    <link href="http://ysocket.pages.dev/2023/09/12/spring-config-override/"/>
    <published>2023-09-12T07:42:00.000Z</published>
    <summary>
      <![CDATA[<p>引用spring cloud config时，Spring cloud默认以远程配置为最高优先级，如果希望本地的配置文件（如application.yml或bootstrap.yml）的某些属性能覆盖远程的同名属性值，则需要在远程配置文件增加以下属性配置（以下所述属性均在P]]>
    </summary>
    <title>spring cloud config本地配置覆盖远程配置属性</title>
    <updated>2025-05-16T14:43:16.190Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="spring boot" scheme="http://ysocket.pages.dev/categories/spring-boot/"/>
    <category term="spring boot" scheme="http://ysocket.pages.dev/tags/spring-boot/"/>
    <content>
      <![CDATA[<p>在Spring Boot的自动配置中经常看到@ConditionalOnProperty注解的使用，本篇文章带大家来了解一下该注解的功能。</p><h4 id="Spring-Boot中的使用"><a href="#Spring-Boot中的使用" class="headerlink" title="Spring Boot中的使用"></a>Spring Boot中的使用</h4><p>在Spring Boot的源码中，比如涉及到Http编码的自动配置、数据源类型的自动配置等大量的使用到了@ConditionalOnProperty的注解。</p><p>HttpEncodingAutoConfiguration类中部分源代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@EnableConfigurationProperties(HttpProperties.class)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(CharacterEncodingFilter.class)</span><br><span class="hljs-meta">@ConditionalOnProperty(prefix = &quot;spring.http.encoding&quot;, value = &quot;enabled&quot;, matchIfMissing = true)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpEncodingAutoConfiguration</span> &#123;<br>    <span class="hljs-comment">// 省略内部代码</span><br>&#125;<br></code></pre></td></tr></table></figure><p>DataSourceConfiguration类中部分代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnClass(org.apache.tomcat.jdbc.pool.DataSource.class)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(DataSource.class)</span><br><span class="hljs-meta">@ConditionalOnProperty(name = &quot;spring.datasource.type&quot;, havingValue = &quot;org.apache.tomcat.jdbc.pool.DataSource&quot;,</span><br><span class="hljs-meta">        matchIfMissing = true)</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Tomcat</span> &#123;<br>  <span class="hljs-comment">// 省略内部代码</span><br>&#125;<br></code></pre></td></tr></table></figure><p>很显然，以上两个自动配置类中都通过@ConditionalOnProperty来控制自动配置是否生效，下面我们来了解一下它的源码和具体使用。</p><h4 id="ConditionalOnProperty源码说明"><a href="#ConditionalOnProperty源码说明" class="headerlink" title="@ConditionalOnProperty源码说明"></a>@ConditionalOnProperty源码说明</h4><p>@ConditionalOnProperty注解类源码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(&#123; ElementType.TYPE, ElementType.METHOD &#125;)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Conditional(OnPropertyCondition.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ConditionalOnProperty &#123;<br><br>    <span class="hljs-comment">// 数组，获取对应property名称的值，与name不可同时使用</span><br>    String[] value() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    <span class="hljs-comment">// 配置属性名称的前缀，比如spring.http.encoding</span><br>    String <span class="hljs-title function_">prefix</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-comment">// 数组，配置属性完整名称或部分名称</span><br>    <span class="hljs-comment">// 可与prefix组合使用，组成完整的配置属性名称，与value不可同时使用</span><br>    String[] name() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    <span class="hljs-comment">// 可与name组合使用，比较获取到的属性值与havingValue给定的值是否相同，相同才加载配置</span><br>    String <span class="hljs-title function_">havingValue</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-comment">// 缺少该配置属性时是否可以加载。如果为true，没有该配置属性时也会正常加载；反之则不会生效</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">matchIfMissing</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>通过注解ConditionalOnProperty上的@Conditional(OnPropertyCondition.class)代码，可以看出ConditionalOnProperty属于@Conditional的衍生注解。生效条件由OnPropertyCondition来进行判断。</p><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><p>关于@ConditionalOnProperty的使用方法，我们在上面的Spring Boot中的使用已经看到。</p><p>@ConditionalOnProperty的核心功能是通过属性name以及havingValue来实现的。</p><p>首先看matchIfMissing属性，用来指定如果配置文件中未进行对应属性配置时的默认处理：默认情况下matchIfMissing为false，也就是说如果未进行属性配置，则自动配置不生效。如果matchIfMissing为true，则表示如果没有对应的属性配置，则自动配置默认生效。</p><p>下面看name属性，name用来从application.properties中读取某个属性值。比如上面Tomcat的自动配置在配置文件为：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">spring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource</span><br></code></pre></td></tr></table></figure><p>在matchIfMissing为false时，如果name值为空，则返回false；如果name不为空，则将该值与havingValue指定的值进行比较，如果一样则返回true，否则返回false。返回false也就意味着自动配置不会生效。</p><p>但是如果看HttpEncodingAutoConfiguration类上的属性配置发现并没有完全按照上面所说的name和havingValue配合使用。它是通过“prefix+value”作为属性的名称来进行配置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">spring.http.encoding.enabled=true</span><br></code></pre></td></tr></table></figure><p>其中prefix指定了配置的统一前缀“spring.http.encoding”，而value指定了具体的属性名称为“enabled”。这里并没有设置havingValue的值，如果havingValue未指定值，默认情况下在属性配置中设置的值为true则生效（如上配置），false则不生效。</p><p>原文链接：《<a href="https://segmentfault.com/a/1190000021236948">SPRING BOOT中@CONDITIONALONPROPERTY使用详解</a>》</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/09/09/springboot-ConditionalOnProperty-detail/</id>
    <link href="http://ysocket.pages.dev/2023/09/09/springboot-ConditionalOnProperty-detail/"/>
    <published>2023-09-09T02:02:00.000Z</published>
    <summary>
      <![CDATA[<p>在Spring Boot的自动配置中经常看到@ConditionalOnProperty注解的使用，本篇文章带大家来了解一下该注解的功能。</p>
<h4 id="Spring-Boot中的使用"><a href="#Spring-Boot中的使用" class="head]]>
    </summary>
    <title>Spring Boot中@ConditionalOnProperty使用详解</title>
    <updated>2025-05-16T14:43:16.190Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="mybatis" scheme="http://ysocket.pages.dev/categories/mybatis/"/>
    <category term="mybatis" scheme="http://ysocket.pages.dev/tags/mybatis/"/>
    <content>
      <![CDATA[<h4 id="一、问题描述"><a href="#一、问题描述" class="headerlink" title="一、问题描述"></a>一、问题描述</h4><p>使用这两个方法，不会对实体中值为Null的属性（字段）进行更新。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">this</span>.updateById(entity);<br> <br><span class="hljs-built_in">this</span>.update(entity, updateWrapper);<br></code></pre></td></tr></table></figure><h4 id="二、问题原因"><a href="#二、问题原因" class="headerlink" title="二、问题原因"></a>二、问题原因</h4><p>原因：mybatis-plus的fieldStrategy的策略有三种，分别是IGNORED-0-忽略，NOT_NULL-1-非NULL（默认策略），NOT_EMPTY-2-非空，所以造成不更新的原因是默认策略。</p><h4 id="三、解决办法"><a href="#三、解决办法" class="headerlink" title="三、解决办法"></a>三、解决办法</h4><ul><li>设置全局的 updateStrategy</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">dbConfig:</span><br>      <span class="hljs-attr">insertStrategy:</span> <span class="hljs-string">NOT_NULL</span><br>      <span class="hljs-attr">updateStrategy:</span> <span class="hljs-string">IGNORED</span><br>      <span class="hljs-attr">where-strategy:</span> <span class="hljs-string">NOT_NULL</span><br></code></pre></td></tr></table></figure><ul><li>对字段单独设置策略</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@TableField(updateStrategy= FieldStrategy.IGNORED)</span><br></code></pre></td></tr></table></figure><ul><li>使用mapper的update</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">LambdaUpdateWrapper&lt;xxx&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;&gt;();<br>wrapper.eq(xxx::getId, xxx.getId());<br>wrapper.set(xxx::getOrgUri, xxx.getOrgUri());<br>wrapper.set(xxx::getBeginTime, <span class="hljs-literal">null</span>);<br>xxxMapper.update(xxx, wrapper);<br></code></pre></td></tr></table></figure><ul><li>使用LambdaUpdateWrapper（推荐）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">LambdaUpdateWrapper&lt;BizFile&gt; lambdaUpdateWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;&gt;();<br><span class="hljs-comment">//过滤条件</span><br>lambdaUpdateWrapper.eq(BizFile::getId, bizFile.getId());<br> <br><span class="hljs-comment">//下面为设置值          </span><br><span class="hljs-comment">//由于parentId会为空，所以要使用LambdaUpdateWrapper</span><br>lambdaUpdateWrapper.set(BizFile::getParentId, parentId);<br>lambdaUpdateWrapper.set(BizFile::getPath, newDirPath);<br> <br><span class="hljs-comment">//更新</span><br><span class="hljs-built_in">this</span>.update(lambdaUpdateWrapper);<br></code></pre></td></tr></table></figure><p>第1种就免了，第2、3种验证过都可以。</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/09/02/mybatis-plus-null-field-not-be-update/</id>
    <link href="http://ysocket.pages.dev/2023/09/02/mybatis-plus-null-field-not-be-update/"/>
    <published>2023-09-02T07:22:00.000Z</published>
    <summary>
      <![CDATA[<h4 id="一、问题描述"><a href="#一、问题描述" class="headerlink" title="一、问题描述"></a>一、问题描述</h4><p>使用这两个方法，不会对实体中值为Null的属性（字段）进行更新。</p>
<figure class="hi]]>
    </summary>
    <title>MyBatis-Plus updateById 不更新null字段</title>
    <updated>2025-05-16T14:43:16.189Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <content>
      <![CDATA[<h4 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h4><p>在java spring cloud项目中，我们常常会在子模块中创建公共方法，那么在另外一个子模块中，需要加载配置文件的时候，往往Spring Boot 自动扫描包的时候，只会扫描自己模块下的类。这个是springboot约定俗成的内容。</p><h4 id="抛出问题"><a href="#抛出问题" class="headerlink" title="抛出问题"></a>抛出问题</h4><p>如果想要被Spring容器管理的Bean的路径不再Spring Boot 的包扫描路径下，怎么办呢？也就是如何去加载第三方的Bean 呢？</p><p>目前较通用的方式有2种，一是使用注解进行实例化，而是使用spring.factories机制。</p><p>这里我们使用Swagger的配置来做实验。</p><p>　首先一个Swagger的配置类：SwaggerConfig，工程结构如下：</p><p><img src="/images/pasted-23.png" alt="upload successful"></p><p>发现我的SwaggerConfig 类和 SpringBoot 的启动类ConfigApplication.java 不在同一级目录下，按照springboot启动机制，以当Spring Boot 自动扫描包的时候，是扫描不到我的SwaggerConfig 的配置的，也就在控制台没有Swagger的打印的信息：</p><p><img src="/images/pasted-24.png" alt="upload successful"></p><p>所以这时候我如果想要把SwaggerConfig 加载到Spring容器中的话 要怎么办呢？下面介绍上面提到的2种方式:</p><h5 id="方法解决"><a href="#方法解决" class="headerlink" title="方法解决"></a>方法解决</h5><ul><li>方法一：在Spring Boot Application 主类上使用@Import注解。</li></ul><p><img src="/images/pasted-25.png" alt="upload successful"></p><ul><li>方法二：创建spring.factories文件<br>现在我们将其改造一下，采用spring.factories 的方式去加载SwaggerConfig类，在resources目录下新建一个META-INF 的目录，然后在</li></ul><p>新建一个spring.factories 的文件，里面的内容为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"># Auto Configure<br>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\<br>com.sg.config.Swagger2Config<br></code></pre></td></tr></table></figure><p>然后在把Spring Boot 启动类上的@Import注释掉，启动发现也可以把SwaggerConfig加载到Spring 容器中。</p><p>到这就完成了加载一个Spring 不能扫描到的一个类，他可以是第三方的，也可以是自己写的，只要是Spring Boot 默认扫描路径不能够扫描到，都可以使用这种方式去加载。</p><h4 id="内部原理机制"><a href="#内部原理机制" class="headerlink" title="内部原理机制"></a>内部原理机制</h4><p>Spring.Factories这种机制实际上是仿照java中的SPI扩展机制实现的。</p><h4 id="什么是SPI-机制"><a href="#什么是SPI-机制" class="headerlink" title="什么是SPI 机制"></a>什么是SPI 机制</h4><p>SPI 的全名为 Service Provider Interface.这个是是针对厂商或者插件的。在java.util.ServiceLoader 的文档里有比较详细的介绍。</p><p>简单总结下Java SPI机制的思想。我们系统里抽象的各个模块，往往有很多不同的实现方案，比如 日志模块的方案，xml解析模块、jdbc模块的方案等。面向的对象设计里，我们一般推荐模块之间基于接口编程，模块之间不对实现类进行硬编码。一旦代码里涉及了具体的实现类，就违反了可插拔的原则，如果需要替换一种实现，就需要修改代码。为了实现在模块装配的时候能不在程序里动态指明，这就需要一种服务发现机制。</p><p>Java SPI 就是提供这样的一种机制：为某个接口寻找服务的实现的机制，有点类似IOC的思想，就是将装配的控制权移到程序之外，在模块化设计中这个机制很重要。</p><h4 id="Spring-Boot-中的SPI-机制"><a href="#Spring-Boot-中的SPI-机制" class="headerlink" title="Spring Boot 中的SPI 机制"></a>Spring Boot 中的SPI 机制</h4><p>在Spring boot 中也有一种类似的加载机制，它在<br>META-INFO&#x2F;spring.factories文件中配置接口的实现类名称，然后在程序中读取这些配置文件并实例化。</p><p>这种自定义的SPI 机制就是Spring Boot Starter 实现的基础。</p><h4 id="Spring-Factories实现原理"><a href="#Spring-Factories实现原理" class="headerlink" title="Spring Factories实现原理"></a>Spring Factories实现原理</h4><p>spring -core 包里定义了SpringFactoriesLoader 类，这个类实现了检索META-INF&#x2F;spring.factories文件，并获取指定接口的配置的功能。在这个类中定义了两个对外的方法：</p><p>loadFactories 根据接口类获取其实现类的实例，这个方法返回的是对象列表<br>loadFactoryNames 根据接口获取其接口类的名称，这个方法返回的是类名的列表。<br>上面两个方法的关键都是从指定的ClassLoader中获取spring.factories文件，并解析得到类名列表，具体代码如下：</p><p><img src="/images/pasted-26.png" alt="upload successful"><br>从代码中可以看到，在这个方法中会遍历整个ClassLoader 中所有Jar包下的spring.factories文件，也就是我们可以在自己jar中配置spring.factories文件，不会影响到其他地方的配置，也不回被别人的配置覆盖。</p><p>spring.factories的是通过Properties解析得到的，所以我们在写文件中的内容都是按照下面这种方式配置的。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"># Auto Configure<br>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\<br>com.sg.config.Swagger2Config<br></code></pre></td></tr></table></figure><p>如果一个接口希望配置多个实现类，可以用”,”分割。</p><h4 id="spring-boot包中的spring-factories文件"><a href="#spring-boot包中的spring-factories文件" class="headerlink" title="spring-boot包中的spring.factories文件"></a>spring-boot包中的spring.factories文件</h4><p>spring-boot包中的spring.factories文件</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># PropertySource Loaders</span><br><span class="hljs-keyword">org.springframework.boot.env.PropertySourceLoader=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.env.PropertiesPropertySourceLoader,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.env.YamlPropertySourceLoader</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># Run Listeners</span><br><span class="hljs-keyword">org.springframework.boot.SpringApplicationRunListener=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.event.EventPublishingRunListener</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># Error Reporters</span><br><span class="hljs-keyword">org.springframework.boot.SpringBootExceptionReporter=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.FailureAnalyzers</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># Application Context Initializers</span><br><span class="hljs-keyword">org.springframework.context.ApplicationContextInitializer=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.ContextIdApplicationContextInitializer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.config.DelegatingApplicationContextInitializer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># Application Listeners</span><br><span class="hljs-keyword">org.springframework.context.ApplicationListener=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.ClearCachesApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.builder.ParentContextCloserApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.FileEncodingApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.config.AnsiOutputApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.config.ConfigFileApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.config.DelegatingApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.logging.ClasspathLoggingApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.context.logging.LoggingApplicationListener,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.liquibase.LiquibaseServiceLocatorApplicationListener</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># Environment Post Processors</span><br><span class="hljs-keyword">org.springframework.boot.env.EnvironmentPostProcessor=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.cloud.CloudFoundryVcapEnvironmentPostProcessor,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.env.SpringApplicationJsonEnvironmentPostProcessor,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># Failure Analyzers</span><br><span class="hljs-keyword">org.springframework.boot.diagnostics.FailureAnalyzer=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.BeanCurrentlyInCreationFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.BeanNotOfRequiredTypeFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.BindFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.BindValidationFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.UnboundConfigurationPropertyFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.ConnectorStartFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.NoUniqueBeanDefinitionFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.PortInUseFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.ValidationExceptionFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.InvalidConfigurationPropertyNameFailureAnalyzer,\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.analyzer.InvalidConfigurationPropertyValueFailureAnalyzer</span><br><span class="hljs-keyword"></span><br><br><span class="hljs-comment"># FailureAnalysisReporters</span><br><span class="hljs-keyword">org.springframework.boot.diagnostics.FailureAnalysisReporter=\</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter</span><br></code></pre></td></tr></table></figure><p>在日常工作中，我们可能需要实现一些SDK 或者Sring boot starter 给别人用的时候，我们就可以使用Factories机制，Factories机制可以让SDK或者Stater的使用只需要很少或者不需要进行配置，只需要在服务中引入我们的Jar包就即可。</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/08/23/spring-factories/</id>
    <link href="http://ysocket.pages.dev/2023/08/23/spring-factories/"/>
    <published>2023-08-23T02:33:33.000Z</published>
    <summary>
      <![CDATA[<h4 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h4><p>在java spring cloud项目中，我们常常会在子模块中创建公共方法，那么在另外一个子模块中，需要加载配置文件的时候，往往Sprin]]>
    </summary>
    <title>springboot核心基础之spring.factories机制</title>
    <updated>2025-05-16T14:43:16.190Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <content>
      <![CDATA[<p> 来源：<a href="https://www.cnblogs.com/chuzijing/p/14591220.html">https://www.cnblogs.com/chuzijing/p/14591220.html</a></p><ul><li>选择Analyze——》Run Inspection by Name…或者使用快捷键Ctrl+Alt+Shift+I</li></ul><p><img src="/images/pasted-17.png" alt="upload successful"></p><ul><li>在弹框中输入：unused declaration</li></ul><p><img src="/images/pasted-18.png" alt="upload successful"></p><ul><li>弹框默认选择</li></ul><p><img src="/images/pasted-19.png" alt="upload successful"></p><ul><li>等待下方读条结束会自动弹出Inspection Results弹窗</li></ul><p><img src="/images/pasted-20.png" alt="upload successful"></p><ul><li>对没有用到的方法和变量提供了四种处理方法</li></ul><p><img src="/images/pasted-21.png" alt="upload successful"></p><p>四种处理方式</p><p>　　* Safe delete：删除；</p><p>　　* Comment out：注释掉；</p><p>　　* Add as Entry Point：添加为入口点；</p><p>　　* Suppress：添加注解@SuppressWarnings(“unused”)或@SuppressWarnings(“ALL”)；</p><p><img src="/images/pasted-22.png" alt="upload successful"></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/08/04/find-unused-by-idea/</id>
    <link href="http://ysocket.pages.dev/2023/08/04/find-unused-by-idea/"/>
    <published>2023-08-04T02:47:38.000Z</published>
    <summary>
      <![CDATA[<p> 来源：<a href="https://www.cnblogs.com/chuzijing/p/14591220.html">https://www.cnblogs.com/chuzijing/p/14591220.html</a></p>
<ul>
<li>选择Anal]]>
    </summary>
    <title>idea使用技巧之检查未使用的类、变量、方法</title>
    <updated>2025-05-16T14:43:16.188Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <content>
      <![CDATA[<h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>编写和维护API文档这个事情，对于后端程序员来说，是一件恼人但又不得不做的事情，我们都不喜欢写文档，但除非项目前后端代码都是自己写的，否则API文档将是前后端协作中一个不可或缺的沟通界面。</p><p>JApiDocs是一个无需额外注解、开箱即用的SpringBoot接口文档生成工具。</p><p>无图无真相，生成文档的效果如下：</p><p><img src="/images/pasted-15.png" alt="JApiDocs"></p><p>相比Swagger要写一堆注解，Spring Rest Docs需要写测试用例，才能生成API文档，JApiDocs 具有无痛集成的特点。</p><h4 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h4><p>要使得JApiDcos正确工作，你写的代码应该是像下面的样子的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 用户接口</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RequestMapping(&quot;/api/user/&quot;)</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 用户列表</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> listForm</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RequestMapping(path = &quot;list&quot;, method = &#123;RequestMethod.GET,  RequestMethod.POST&#125;  )</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;PageResult&lt;UserVO&gt;&gt; <span class="hljs-title function_">list</span><span class="hljs-params">(UserListForm listForm)</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 保存用户</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userForm</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(path = &quot;save&quot;)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;UserVO&gt; <span class="hljs-title function_">saveUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserForm userForm)</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>我们给Controller类和方法加上必要的注释，给接口方法返回相关的对象类型。是的，这样JApiDocs就能解析到相关的接口信息了，就跟我们平时写的代码是差不多的，但要注意，你要通过@param来告诉JApiDocs接口的参数，但在IDE的帮助下，这个工作将是轻松愉悦的：</p><p><img src="/images/pasted-16.png" alt="upload successful"></p><p>然后你在任意一个main入口方法执行下面的代码就可以生成文档了：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">DocsConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DocsConfig</span>();<br>config.setProjectPath(<span class="hljs-string">&quot;your springboot project path&quot;</span>); <span class="hljs-comment">// 项目根目录</span><br>config.setProjectName(<span class="hljs-string">&quot;ProjectName&quot;</span>); <span class="hljs-comment">// 项目名称</span><br>config.setApiVersion(<span class="hljs-string">&quot;V1.0&quot;</span>);       <span class="hljs-comment">// 声明该API的版本</span><br>config.setDocsPath(<span class="hljs-string">&quot;your api docs path&quot;</span>); <span class="hljs-comment">// 生成API 文档所在目录</span><br>config.setAutoGenerate(Boolean.TRUE);  <span class="hljs-comment">// 配置自动生成</span><br>Docs.buildHtmlDocs(config); <span class="hljs-comment">// 执行生成文档</span><br><br></code></pre></td></tr></table></figure><h4 id="仓库地址"><a href="#仓库地址" class="headerlink" title="仓库地址"></a>仓库地址</h4><p><a href="https://github.com/YeDaxia/JApiDocs">github仓库</a></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/07/31/JApiDocs/</id>
    <link href="http://ysocket.pages.dev/2023/07/31/JApiDocs/"/>
    <published>2023-07-31T00:35:23.000Z</published>
    <summary>
      <![CDATA[<h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>编写和维护API文档这个事情，对于后端程序员来说，是一件恼人但又不得不做的事情，我们都不喜欢写文档，但除非项目前后端代码都是自己写的，否则A]]>
    </summary>
    <title>无需额外注解的 SpringBoot API文档生成工具</title>
    <updated>2025-05-16T14:43:16.187Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <content>
      <![CDATA[<p>文章来源： <a href="http://ballcat.cn/guide/feature/openapi.html">http://ballcat.cn/guide/feature/openapi.html</a></p><h3 id="什么是-OpenAPI"><a href="#什么是-OpenAPI" class="headerlink" title="什么是 OpenAPI"></a>什么是 OpenAPI</h3><p>首先 OpenAPI 其实就是 Swagger, Swagger 规范于 2015 年 更名为 OpenAPI 规范，简称 OAS.</p><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><blockquote><p>由于 springfox 社区已经超过一年半的时间没有进行更新维护了，所以推荐大家使用 springdoc-openapi 来构建 swagger 文档。</p></blockquote><p>springdoc 官方文档地址：<a href="https://springdoc.org,这里摘录并翻译部分,更多使用可参看原文档./">https://springdoc.org，这里摘录并翻译部分，更多使用可参看原文档。</a></p><h3 id="依赖引入"><a href="#依赖引入" class="headerlink" title="依赖引入"></a>依赖引入</h3><p>引入 ui 依赖后，在 springboot 环境下，直接启动即可，无需任何额外配置</p><ul><li>spring-webmvc 环境下引入</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springdoc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springdoc-openapi-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;lastedVersion&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>spring-webflux 环境下引入</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springdoc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springdoc-openapi-webflux-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;lastedVersion&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>这将自动将 swagger-ui 部署到 spring-boot 应用程序：</p><ul><li>文档将以 HTML 格式提供，使用官方 swagger-ui jars</li><li>启动项目后，访问 <a href="http://server:port/context-path/swagger-ui.html">http://server:port/context-path/swagger-ui.html</a> 即可进入 Swagger UI 页面，OpenAPI 描述将在以下 json 格式的 url 中 提供：<a href="http://server:port/context-path/v3/api-docs">http://server:port/context-path/v3/api-docs</a></li><li>server：域名 或 IP</li><li>port：服务器端口</li><li>port：服务器端口</li><li>文档也可以 yaml 格式提供，位于以下路径：&#x2F;v3&#x2F;api-docs.yaml</li></ul><h3 id="替换-UI"><a href="#替换-UI" class="headerlink" title="替换 UI"></a>替换 UI</h3><p>如果嫌弃官方提供的 swagger-ui 不美观，或者使用不顺手，可以选择关闭 ui，还可以剔除掉 ui 相关的 webjar 的引入。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">springdoc:</span><br>  <span class="hljs-attr">swagger-ui:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>OpenAPI 文档信息，默认可在此 url 中获取：<a href="http://server:port/context-path/v3/api-docs。">http://server:port/context-path/v3/api-docs。</a><br>可以利用其他支持 OpenAPI 协议的工具，通过此地址，进行 API 展示，如 Apifox。<br>（ Postman 的 api 测试也可以利用此地址进行导入生成 ）</p><h3 id="Javadoc-支持"><a href="#Javadoc-支持" class="headerlink" title="Javadoc 支持"></a>Javadoc 支持</h3><p>springdoc-openapi 目前支持将 javadoc 转换为 swagger 信息来源的能力，而无需用户在项目中添加对应的 Swagger 的注解。</p><p>对于想要启用 javadoc 支持的项目，在之前的依赖之外，还需要额外添加以下依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springdoc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springdoc-openapi-javadoc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;lastedVersion&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>此依赖项改进了对 javadoc 标记和注释的支持：</p><ul><li>方法的 javadoc 注释：解析为 @Operation 描述</li><li>@return : 解析为 @Operation 响应描述</li><li>属性的 javadoc 注释：被解析为此字段的 @Schema 描述。<br>javadoc 支持基于 therapi-runtime-javadoc，所以需要开启了对应的注解处理器，否则不会生效<br>在 maven-compiler-plugin 添加对应的注解处理器:</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">annotationProcessorPaths</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.therapi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>therapi-runtime-javadoc-scribe<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">annotationProcessorPaths</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/07/26/OpenApi-swaager/</id>
    <link href="http://ysocket.pages.dev/2023/07/26/OpenApi-swaager/"/>
    <published>2023-07-26T07:30:07.000Z</published>
    <summary>
      <![CDATA[<p>文章来源： <a href="http://ballcat.cn/guide/feature/openapi.html">http://ballcat.cn/guide/feature/openapi.html</a></p>
<h3 id="什么是-OpenAPI"><a]]>
    </summary>
    <title>OpenAPI 文档 (Swagger)</title>
    <updated>2025-05-16T14:43:16.187Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="JAVA" scheme="http://ysocket.pages.dev/tags/JAVA/"/>
    <content>
      <![CDATA[<h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>众所周知，Maven和Gradle几乎包含了所有Java项目的构建。而目前绝大部分的Java项目都是使用Maven的方式，Maven对比Gradle的劣势很明显，就是太慢了！<br>但是现在，Maven也可以变得更快了！</p><h5 id="maven-mvnd是什么？"><a href="#maven-mvnd是什么？" class="headerlink" title="maven-mvnd是什么？"></a>maven-mvnd是什么？</h5><p>maven-mvnd是Apache Maven团队借鉴了Gradle和Takari的优点，衍生出来的更快的构建工具，maven的强化版！</p><p>maven-mvnd 在设计上，使用一个或多个守护进程来构建服务，以此来达到并行的目的！同时，maven-mvnd 内置了maven，因此我可以在maven 过渡到 maven-mvnd的过程中实现 无缝切换！不必再安装maven或进行复杂的配置更改。</p><h5 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h5><p>mvnd 与 maven 命令几乎没有任何不同，可以通过查看mvnd -help 查看</p><p>举个例子、如要打包安装，则把 mvn clean install 替换为 mvnd clean install 即可。</p><h5 id="配置使用原先已存在的-maven-的仓库！"><a href="#配置使用原先已存在的-maven-的仓库！" class="headerlink" title="配置使用原先已存在的 maven 的仓库！"></a>配置使用原先已存在的 maven 的仓库！</h5><p>可以修改 mvnd 解压目录下 conf 里的 mvnd.properties 文件，<br>拉到最后面，放开 maven.setting 注释，把值改成自己的maven仓库地址即可，如下：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">maven.settings=D:<span class="hljs-regexp">//m</span>aven<span class="hljs-regexp">//</span>apache-maven-<span class="hljs-number">3.6</span>.<span class="hljs-number">3</span><span class="hljs-regexp">//</span>conf<span class="hljs-regexp">//</span>settings.xml<br></code></pre></td></tr></table></figure><p>到此配置已经完成 ！</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2023/07/22/mvnd/</id>
    <link href="http://ysocket.pages.dev/2023/07/22/mvnd/"/>
    <published>2023-07-22T01:27:00.000Z</published>
    <summary>
      <![CDATA[<h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>众所周知，Maven和Gradle几乎包含了所有Java项目的构建。而目前绝大部分的Java项目都是使用Maven的方式，Maven对比Gr]]>
    </summary>
    <title>新版Maven，构建速度大幅提升</title>
    <updated>2025-05-16T14:43:16.189Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="Java" scheme="http://ysocket.pages.dev/categories/Java/"/>
    <category term="Spring" scheme="http://ysocket.pages.dev/categories/Java/Spring/"/>
    <category term="Spring" scheme="http://ysocket.pages.dev/tags/Spring/"/>
    <category term="Java" scheme="http://ysocket.pages.dev/tags/Java/"/>
    <content>
      <![CDATA[<h4 id="理解Spring-AOP"><a href="#理解Spring-AOP" class="headerlink" title="理解Spring AOP"></a>理解Spring AOP</h4><hr><p>提到AOP那我们自然会想到初学java时经常提到的OOP，OOP表示的是面向对象编程，是一种编程思想。AOP则是面向切面编程，同样也是一种编程思想。从Spring作为一个框架的角度来说，提供了一整套的面向切面编程的机制，让我们更容易进行开发，这套机制在Spring中就称为Spring AOP。</p><p><strong>AOP</strong> ：将程序中的交叉业务（日志、安全、事务等），封装成一个切面，然后注入到目标对象的具体逻辑中去。AOP可以对某个对象或某些对象的功能进行增强，具体来说，对某个对象的方法进行增强，可以在执行方法之余额外做一些事情，可以在方法前、方法后等。</p><h4 id="Spring-AOP中的概念"><a href="#Spring-AOP中的概念" class="headerlink" title="Spring AOP中的概念"></a>Spring AOP中的概念</h4><hr><ul><li><p><strong>Aspect</strong>：切面，比如被@Aspect注解的类就是切面，可以在切面中去定义Pointcut、advice等等</p></li><li><p><strong>Join point</strong>：连接点，表示一个程序在执行过程中的一个点，比如一个方法的运行，比如一个异常的处理。在Spring AOP中，一个连接点通常表示一个方法的执行。</p></li><li><p><strong>Advice</strong>：通知，表示在一个特定连接点上所采取的动作。</p></li><li><p><strong>Pointcut</strong>：切点，用来匹配一个或多个连接点，Advice与切点表达式时关联在一起的，Advice将会执行在和切点表达式所匹配的连接点上</p></li><li><p><strong>Introduction</strong>：可以使用@DeclareParents来给所匹配的类添加一个接口，并指定一个默认实现</p></li><li><p><strong>Target object</strong>：目标对象，被代理对象</p></li><li><p><strong>AOP proxy</strong>：代理工厂，用来创建代理对象的。在Spring Framework中，要么是JDK动态代理，要么是CGLIB代理</p></li><li><p><strong>Weaving</strong>：织入，表示创建代理对象的动作，这个动作Aspejctij发生在编译时期，Spring AOP在运行时</p></li></ul><h4 id="实现方式（动态代理）"><a href="#实现方式（动态代理）" class="headerlink" title="实现方式（动态代理）"></a>实现方式（动态代理）</h4><hr><h6 id="源码解析"><a href="#源码解析" class="headerlink" title="源码解析"></a>源码解析</h6><p>Spring AOP 解析切面源码入口 @EnableAspectJAutoProxy —&gt; AspectJAutoProxyRegistrar —&gt;AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(registry);通过上面的注册一个Bean定义 AnnotationAwareAspectJAutoProxyCreator.class查看注册的bean的结构，可以知道注册的是一个bean的后置处理器；此处就是ioc的一个扩展点。</p><p><img src="/images/pasted-13.png" alt="upload successful"></p><p>接下来我们重点看几个重要的类</p><h5 id="ProxyFactory"><a href="#ProxyFactory" class="headerlink" title="ProxyFactory"></a>ProxyFactory</h5><hr><p>这个就是应用代理技术，Spring经过封装后，生成的代理工厂类，会由它来负责创建具体的代理类。</p><p><img src="/images/pasted-14.png" alt="upload successful"></p><p>通过ProxyFactory，我们在使用过程中不需要去关注到底使用cglib，还是jdk动态代理，Spring实现的PorxyFactory会帮助我们去判断通过何种方式生成代理类</p><ul><li><p>如果被代理类实现了接口，那么底层就会自动使用jdk动态代理，生成对应接口类型的代理对象</p></li><li><p>如果被代理类没有实现接口，那么就选择cglib技术</p></li><li><p>动态代理模式：动态代理类的源码是在程序运行期间通过JVM反射等机制动态生成，代理类和委托类的关系是运行时才确定的。</p></li></ul><p><strong>说明链接</strong>： <a href="https://mp.weixin.qq.com/s/yr4Syf1bgm3fx-HiyTW2Cg">一文搞懂Spring AOP原理，面试不再怕的！</a></p><h5 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h5><hr><p>五个注解，表示代理逻辑以及执行时机</p><ul><li><p>@Before：接口MethodBeforeAdvice，继承了接口BeforeAdvice</p></li><li><p>@AfterReturning：接口AfterReturningAdvice</p></li><li><p>@AfterThrowing：接口ThrowsAdvice</p></li><li><p>@After：接口AfterAdvice</p></li><li><p>@Around：接口AfterAdvice</p></li></ul><p>Spring会把五个注解解析为对应的Advice类：  </p><ul><li><p>@Before：AspectJMethodBeforeAdvice，实际上就是一个MethodBeforeAdvice</p></li><li><p>@AfterReturning：AspectJAfterReturningAdvice，实际上就是一个AfterReturningAdvice</p></li><li><p>@AfterThrowing：AspectJAfterThrowingAdvice，实际上就是一个MethodInterceptor</p></li><li><p>@After：AspectJAfterAdvice，实际上就是一个MethodInterceptor</p></li><li><p>@Around：AspectJAroundAdvice，实际上就是一个MethodInterceptor</p></li></ul>]]>
    </content>
    <id>http://ysocket.pages.dev/2022/12/14/spring-aop-01/</id>
    <link href="http://ysocket.pages.dev/2022/12/14/spring-aop-01/"/>
    <published>2022-12-14T06:04:00.000Z</published>
    <summary>
      <![CDATA[<h4 id="理解Spring-AOP"><a href="#理解Spring-AOP" class="headerlink" title="理解Spring AOP"></a>理解Spring AOP</h4><hr>
<p>提到AOP那我们自然会想到初学java时经常提到的]]>
    </summary>
    <title>SpringAOP底层原理</title>
    <updated>2025-05-16T14:43:16.190Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="java" scheme="http://ysocket.pages.dev/categories/java/"/>
    <category term="java" scheme="http://ysocket.pages.dev/tags/java/"/>
    <category term="debug" scheme="http://ysocket.pages.dev/tags/debug/"/>
    <content>
      <![CDATA[<p>今天给大家带来几个我日常工作以及阅读源码必备的 IntelliJ IDEA 高级调试技巧，分分钟要起飞的节奏</p><h4 id="断点处添加-log"><a href="#断点处添加-log" class="headerlink" title="断点处添加 log"></a>断点处添加 log</h4><p>很多程序员在调试代码时都喜欢 print 一些内容，这样看起来更直观，print 完之后又很容易忘记删除掉这些没用的内容，最终将代码提交到 remote，code review 时又不得不删减这些内容重新提交，不但增加不必要的工作量，还让 log tree 的一些节点没有任何价值</p><p>IntelliJ IDEA 提供 Evaluate and Log at Breakpoints 功能恰巧可以帮助我们解决这个问题, 来看下面代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>  <span class="hljs-type">ThreadLocalRandom</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> ThreadLocalRandom.current();<br>  <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>   <span class="hljs-keyword">if</span> (isInterested(random.nextInt(<span class="hljs-number">10</span>))) &#123;<br>    count++;<br>   &#125;<br>  &#125;<br>  System.out.printf(<span class="hljs-string">&quot;Found %d interested values%n&quot;</span>, count);<br> &#125;<br><br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInterested</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>  <span class="hljs-keyword">return</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>;<br> &#125;<br></code></pre></td></tr></table></figure><span id="more"></span><p>假如我们想在第 15 行查看每次调用，随即出来的 i 的值到底是多少，我们没必要在这个地方添加任何 log，在正常加断点的地方使用快捷键 <strong>Shift + 鼠标左键</strong>，就会弹出下面的内容</p><p><img src="/images/pasted-5.png" alt="image1"><br>勾选上 Evaluate and log, 并自定义你想查看的 log&#x2F;变量，比如这里的 “interested” + i, 这样以 Debug 模式运行程序（正常模式运行，不会打印这些 log）：</p><pre><code class="hljs">Breakpoint reached at top.dayarch.TestDebug.isInterested(TestDebug.java:49)interested 6Breakpoint reached at top.dayarch.TestDebug.isInterested(TestDebug.java:49)interested 0Breakpoint reached at top.dayarch.TestDebug.isInterested(TestDebug.java:49)interested 9Breakpoint reached at top.dayarch.TestDebug.isInterested(TestDebug.java:49)interested 8Breakpoint reached at top.dayarch.TestDebug.isInterested(TestDebug.java:49)interested 1Found 3 interested valuesDisconnected from the target VM, address: &#39;127.0.0.1:0&#39;, transport: &#39;socket&#39;Process finished with exit code</code></pre><p>如果你想要更详细的信息，那就勾选上 Stack trace (大家自己查看运行结果吧)，有了这个功能，上面说的一些问题都不复存在了</p><h4 id="字段断点"><a href="#字段断点" class="headerlink" title="字段断点"></a>字段断点</h4><p>如果你阅读源码，你一定会有个困扰，类中的某个字段的值到底是在哪里改变的，你要一点点追踪调用栈，逐步排查，稍不留神，就可能有遗漏,我们可以在 IntelliJ IDEA 中为某个字段添加断点，当字段值有修改时，自动跳到相应方法位置</p><p>使用起来很简单：</p><ul><li>在字段定义处鼠标左键添加断点（会出现「眼睛」的图标）</li><li>在「眼睛」图标上鼠标右键</li><li>在弹框中勾选上 Field access 和 Field modification 两个选项<br><img src="/images/pasted-6.png" alt="upload successful"></li></ul><p>如果修改字段值的方法比较多，也可以在 Condition 的地方定义断点进入条件, 有了这个功能的加成，相信你阅读源码会顺畅许多</p><h4 id="异常断点"><a href="#异常断点" class="headerlink" title="异常断点"></a>异常断点</h4><p>除了阅读源码，一定是遇到了异常我们才开始调试代码，代码在抛出异常之后会自动停止，但是我们希望：代码停在抛出异常之前，方便我们查看当时的变量信息</p><p>这时我们就用到了 Exception Breakpoints, 当抛出异常时，在 catch 的地方打上断点，可以通过下图的几个位置获取栈顶异常类型，比如这里的 NumberFormatException</p><p><img src="/images/pasted-7.png" alt="upload successful"></p><p>知道异常类型后，就可以按照如下步骤添加异常断点了：</p><p><img src="/images/pasted-8.png" alt="upload successful"><br>然后在弹框中选择 NumberFormatException</p><p><img src="/images/pasted-9.png" alt="upload successful"><br>重新以 Debug 模式运行程序：</p><p><img src="/images/pasted-10.png" alt="upload successful"><br>程序「一路绿灯式」定位到抛出异常的位置，同时指出当时的变量信息，三个字：稳，准，狠，还有谁？</p><h4 id="方法断点"><a href="#方法断点" class="headerlink" title="方法断点"></a>方法断点</h4><p>当阅读源码时，比如 Spring，一个接口的方法可能被多个子类实现，当运行时，需要查看调用栈逐步定位实现类，IDEA 同样支持在接口方法上添加断点（<strong>快捷键 cmd+F8&#x2F;ctrl+F8</strong>）：</p><ul><li>鼠标左键在方法处点击断点（♦️形状）</li><li>断点上鼠标右键</li></ul><p>勾选上绿色框线上的内容，同样可以自定义跳转条件 Condition</p><p><img src="/images/pasted-11.png" alt="upload successful"><br>当以 Debug 模式运行程序的时候，会自动进入实现类的方法（注意断点形状）：</p><p><img src="/images/pasted-12.png" alt="upload successful"><br>看到这你应该想到常见的 Runnable 接口中的 run 方法了，同样是有作用的，大家可以自行去尝试了</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>相信有以上四种调试技巧的加成，无论是工作debug 还是私下阅读源码，都可以轻松驾驭了。<br>最后，来看看 IDEA 支持的各种断点调试类型，如果你只知道红色小圆点，那咱在留言区好好说说吧</p>]]>
    </content>
    <id>http://ysocket.pages.dev/2022/03/26/idea-debug-4-skills/</id>
    <link href="http://ysocket.pages.dev/2022/03/26/idea-debug-4-skills/"/>
    <published>2022-03-26T08:26:00.000Z</published>
    <summary>
      <![CDATA[<p>今天给大家带来几个我日常工作以及阅读源码必备的 IntelliJ IDEA 高级调试技巧，分分钟要起飞的节奏</p>
<h4 id="断点处添加-log"><a href="#断点处添加-log" class="headerlink" title="断点处添加 log"></a>断点处添加 log</h4><p>很多程序员在调试代码时都喜欢 print 一些内容，这样看起来更直观，print 完之后又很容易忘记删除掉这些没用的内容，最终将代码提交到 remote，code review 时又不得不删减这些内容重新提交，不但增加不必要的工作量，还让 log tree 的一些节点没有任何价值</p>
<p>IntelliJ IDEA 提供 Evaluate and Log at Breakpoints 功能恰巧可以帮助我们解决这个问题, 来看下面代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>  <span class="hljs-type">ThreadLocalRandom</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> ThreadLocalRandom.current();<br>  <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>   <span class="hljs-keyword">if</span> (isInterested(random.nextInt(<span class="hljs-number">10</span>))) &#123;<br>    count++;<br>   &#125;<br>  &#125;<br>  System.out.printf(<span class="hljs-string">&quot;Found %d interested values%n&quot;</span>, count);<br> &#125;<br><br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInterested</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>  <span class="hljs-keyword">return</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>;<br> &#125;<br></code></pre></td></tr></table></figure>]]>
    </summary>
    <title>4 个 yyds 的 IDEA 高级调试技巧</title>
    <updated>2025-05-16T14:43:16.188Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <category term="java" scheme="http://ysocket.pages.dev/tags/java/"/>
    <category term="oshi" scheme="http://ysocket.pages.dev/tags/oshi/"/>
    <content>
      <![CDATA[<h5 id="一、引入jar包"><a href="#一、引入jar包" class="headerlink" title="一、引入jar包"></a>一、引入jar包</h5><p>　　本项目主要使用第开源jar包：<a href="https://github.com/oshi/oshi">https://github.com/oshi/oshi</a><br>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.github.oshi/oshi-core --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.oshi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>oshi-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></p><span id="more"></span><h5 id="二、测试代码"><a href="#二、测试代码" class="headerlink" title="二、测试代码"></a>二、测试代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.slf4j.Logger;<br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><span class="hljs-keyword">import</span> oshi.SystemInfo;<br><span class="hljs-keyword">import</span> oshi.hardware.*;<br><span class="hljs-keyword">import</span> oshi.hardware.CentralProcessor.TickType;<br><span class="hljs-keyword">import</span> oshi.software.os.*;<br><span class="hljs-keyword">import</span> oshi.software.os.OperatingSystem.ProcessSort;<br><span class="hljs-keyword">import</span> oshi.util.FormatUtil;<br><span class="hljs-keyword">import</span> oshi.util.Util;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * The Class SystemInfoTest.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> dblock[at]dblock[dot]org</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SystemInfoTest</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * The main method.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args the arguments</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// Options: ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE</span><br>        <span class="hljs-type">Logger</span> <span class="hljs-variable">LOG</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(SystemInfoTest.class);<br><br>        LOG.info(<span class="hljs-string">&quot;Initializing System...&quot;</span>);<br>        <span class="hljs-type">SystemInfo</span> <span class="hljs-variable">si</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemInfo</span>();<br><br>        <span class="hljs-type">HardwareAbstractionLayer</span> <span class="hljs-variable">hal</span> <span class="hljs-operator">=</span> si.getHardware();<br>        <span class="hljs-type">OperatingSystem</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> si.getOperatingSystem();<br><br>        System.out.println(os);<br><br>        LOG.info(<span class="hljs-string">&quot;Checking computer system...&quot;</span>);<br>        printComputerSystem(hal.getComputerSystem());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Processor...&quot;</span>);<br>        printProcessor(hal.getProcessor());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Memory...&quot;</span>);<br>        printMemory(hal.getMemory());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking CPU...&quot;</span>);<br>        printCpu(hal.getProcessor());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Processes...&quot;</span>);<br>        printProcesses(os, hal.getMemory());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Sensors...&quot;</span>);<br>        printSensors(hal.getSensors());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Power sources...&quot;</span>);<br>        printPowerSources(hal.getPowerSources());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Disks...&quot;</span>);<br>        printDisks(hal.getDiskStores());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking File System...&quot;</span>);<br>        printFileSystem(os.getFileSystem());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Network interfaces...&quot;</span>);<br>        printNetworkInterfaces(hal.getNetworkIFs());<br><br>        LOG.info(<span class="hljs-string">&quot;Checking Network parameterss...&quot;</span>);<br>        printNetworkParameters(os.getNetworkParams());<br><br>        <span class="hljs-comment">// hardware: displays</span><br>        LOG.info(<span class="hljs-string">&quot;Checking Displays...&quot;</span>);<br>        printDisplays(hal.getDisplays());<br><br>        <span class="hljs-comment">// hardware: USB devices</span><br>        LOG.info(<span class="hljs-string">&quot;Checking USB Devices...&quot;</span>);<br>        printUsbDevices(hal.getUsbDevices(<span class="hljs-literal">true</span>));<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printComputerSystem</span><span class="hljs-params">(<span class="hljs-keyword">final</span> ComputerSystem computerSystem)</span> &#123;<br><br>        System.out.println(<span class="hljs-string">&quot;manufacturer: &quot;</span> + computerSystem.getManufacturer());<br>        System.out.println(<span class="hljs-string">&quot;model: &quot;</span> + computerSystem.getModel());<br>        System.out.println(<span class="hljs-string">&quot;serialnumber: &quot;</span> + computerSystem.getSerialNumber());<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Firmware</span> <span class="hljs-variable">firmware</span> <span class="hljs-operator">=</span> computerSystem.getFirmware();<br>        System.out.println(<span class="hljs-string">&quot;firmware:&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;  manufacturer: &quot;</span> + firmware.getManufacturer());<br>        System.out.println(<span class="hljs-string">&quot;  name: &quot;</span> + firmware.getName());<br>        System.out.println(<span class="hljs-string">&quot;  description: &quot;</span> + firmware.getDescription());<br>        System.out.println(<span class="hljs-string">&quot;  version: &quot;</span> + firmware.getVersion());<br>        System.out.println(<span class="hljs-string">&quot;  release date: &quot;</span> + (firmware.getReleaseDate() == <span class="hljs-literal">null</span> ? <span class="hljs-string">&quot;unknown&quot;</span><br>                : firmware.getReleaseDate() == <span class="hljs-literal">null</span> ? <span class="hljs-string">&quot;unknown&quot;</span> : FormatUtil.formatDate(firmware.getReleaseDate())));<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Baseboard</span> <span class="hljs-variable">baseboard</span> <span class="hljs-operator">=</span> computerSystem.getBaseboard();<br>        System.out.println(<span class="hljs-string">&quot;baseboard:&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;  manufacturer: &quot;</span> + baseboard.getManufacturer());<br>        System.out.println(<span class="hljs-string">&quot;  model: &quot;</span> + baseboard.getModel());<br>        System.out.println(<span class="hljs-string">&quot;  version: &quot;</span> + baseboard.getVersion());<br>        System.out.println(<span class="hljs-string">&quot;  serialnumber: &quot;</span> + baseboard.getSerialNumber());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printProcessor</span><span class="hljs-params">(CentralProcessor processor)</span> &#123;<br>        System.out.println(processor);<br>        System.out.println(<span class="hljs-string">&quot; &quot;</span> + processor.getPhysicalPackageCount() + <span class="hljs-string">&quot; physical CPU package(s)&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; &quot;</span> + processor.getPhysicalProcessorCount() + <span class="hljs-string">&quot; physical CPU core(s)&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot; &quot;</span> + processor.getLogicalProcessorCount() + <span class="hljs-string">&quot; logical CPU(s)&quot;</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;Identifier: &quot;</span> + processor.getIdentifier());<br>        System.out.println(<span class="hljs-string">&quot;ProcessorID: &quot;</span> + processor.getProcessorID());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printMemory</span><span class="hljs-params">(GlobalMemory memory)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Memory: &quot;</span> + FormatUtil.formatBytes(memory.getAvailable()) + <span class="hljs-string">&quot;/&quot;</span><br>                + FormatUtil.formatBytes(memory.getTotal()));<br>        System.out.println(<span class="hljs-string">&quot;Swap used: &quot;</span> + FormatUtil.formatBytes(memory.getSwapUsed()) + <span class="hljs-string">&quot;/&quot;</span><br>                + FormatUtil.formatBytes(memory.getSwapTotal()));<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCpu</span><span class="hljs-params">(CentralProcessor processor)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Uptime: &quot;</span> + FormatUtil.formatElapsedSecs(processor.getSystemUptime()));<br>        System.out.println(<br>                <span class="hljs-string">&quot;Context Switches/Interrupts: &quot;</span> + processor.getContextSwitches() + <span class="hljs-string">&quot; / &quot;</span> + processor.getInterrupts());<br><br>        <span class="hljs-type">long</span>[] prevTicks = processor.getSystemCpuLoadTicks();<br>        System.out.println(<span class="hljs-string">&quot;CPU, IOWait, and IRQ ticks @ 0 sec:&quot;</span> + Arrays.toString(prevTicks));<br>        <span class="hljs-comment">// Wait a second...</span><br>        Util.sleep(<span class="hljs-number">1000</span>);<br>        <span class="hljs-type">long</span>[] ticks = processor.getSystemCpuLoadTicks();<br>        System.out.println(<span class="hljs-string">&quot;CPU, IOWait, and IRQ ticks @ 1 sec:&quot;</span> + Arrays.toString(ticks));<br>        <span class="hljs-type">long</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> ticks[TickType.USER.getIndex()] - prevTicks[TickType.USER.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">nice</span> <span class="hljs-operator">=</span> ticks[TickType.NICE.getIndex()] - prevTicks[TickType.NICE.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">sys</span> <span class="hljs-operator">=</span> ticks[TickType.SYSTEM.getIndex()] - prevTicks[TickType.SYSTEM.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">idle</span> <span class="hljs-operator">=</span> ticks[TickType.IDLE.getIndex()] - prevTicks[TickType.IDLE.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">iowait</span> <span class="hljs-operator">=</span> ticks[TickType.IOWAIT.getIndex()] - prevTicks[TickType.IOWAIT.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">irq</span> <span class="hljs-operator">=</span> ticks[TickType.IRQ.getIndex()] - prevTicks[TickType.IRQ.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">softirq</span> <span class="hljs-operator">=</span> ticks[TickType.SOFTIRQ.getIndex()] - prevTicks[TickType.SOFTIRQ.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">steal</span> <span class="hljs-operator">=</span> ticks[TickType.STEAL.getIndex()] - prevTicks[TickType.STEAL.getIndex()];<br>        <span class="hljs-type">long</span> <span class="hljs-variable">totalCpu</span> <span class="hljs-operator">=</span> user + nice + sys + idle + iowait + irq + softirq + steal;<br><br>        System.out.format(<br>                <span class="hljs-string">&quot;User: %.1f%% Nice: %.1f%% System: %.1f%% Idle: %.1f%% IOwait: %.1f%% IRQ: %.1f%% SoftIRQ: %.1f%% Steal: %.1f%%%n&quot;</span>,<br>                <span class="hljs-number">100d</span> * user / totalCpu, <span class="hljs-number">100d</span> * nice / totalCpu, <span class="hljs-number">100d</span> * sys / totalCpu, <span class="hljs-number">100d</span> * idle / totalCpu,<br>                <span class="hljs-number">100d</span> * iowait / totalCpu, <span class="hljs-number">100d</span> * irq / totalCpu, <span class="hljs-number">100d</span> * softirq / totalCpu, <span class="hljs-number">100d</span> * steal / totalCpu);<br>        System.out.format(<span class="hljs-string">&quot;CPU load: %.1f%% (counting ticks)%n&quot;</span>, processor.getSystemCpuLoadBetweenTicks() * <span class="hljs-number">100</span>);<br>        System.out.format(<span class="hljs-string">&quot;CPU load: %.1f%% (OS MXBean)%n&quot;</span>, processor.getSystemCpuLoad() * <span class="hljs-number">100</span>);<br>        <span class="hljs-type">double</span>[] loadAverage = processor.getSystemLoadAverage(<span class="hljs-number">3</span>);<br>        System.out.println(<span class="hljs-string">&quot;CPU load averages:&quot;</span> + (loadAverage[<span class="hljs-number">0</span>] &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot; N/A&quot;</span> : String.format(<span class="hljs-string">&quot; %.2f&quot;</span>, loadAverage[<span class="hljs-number">0</span>]))<br>                + (loadAverage[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot; N/A&quot;</span> : String.format(<span class="hljs-string">&quot; %.2f&quot;</span>, loadAverage[<span class="hljs-number">1</span>]))<br>                + (loadAverage[<span class="hljs-number">2</span>] &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot; N/A&quot;</span> : String.format(<span class="hljs-string">&quot; %.2f&quot;</span>, loadAverage[<span class="hljs-number">2</span>])));<br>        <span class="hljs-comment">// per core CPU</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">procCpu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;CPU load per processor:&quot;</span>);<br>        <span class="hljs-type">double</span>[] load = processor.getProcessorCpuLoadBetweenTicks();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">double</span> avg : load) &#123;<br>            procCpu.append(String.format(<span class="hljs-string">&quot; %.1f%%&quot;</span>, avg * <span class="hljs-number">100</span>));<br>        &#125;<br>        System.out.println(procCpu.toString());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printProcesses</span><span class="hljs-params">(OperatingSystem os, GlobalMemory memory)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Processes: &quot;</span> + os.getProcessCount() + <span class="hljs-string">&quot;, Threads: &quot;</span> + os.getThreadCount());<br>        <span class="hljs-comment">// Sort by highest CPU</span><br>        List&lt;OSProcess&gt; procs = Arrays.asList(os.getProcesses(<span class="hljs-number">5</span>, ProcessSort.CPU));<br><br>        System.out.println(<span class="hljs-string">&quot;   PID  %CPU %MEM       VSZ       RSS Name&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; procs.size() &amp;&amp; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            <span class="hljs-type">OSProcess</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> procs.get(i);<br>            System.out.format(<span class="hljs-string">&quot; %5d %5.1f %4.1f %9s %9s %s%n&quot;</span>, p.getProcessID(),<br>                    <span class="hljs-number">100d</span> * (p.getKernelTime() + p.getUserTime()) / p.getUpTime(),<br>                    <span class="hljs-number">100d</span> * p.getResidentSetSize() / memory.getTotal(), FormatUtil.formatBytes(p.getVirtualSize()),<br>                    FormatUtil.formatBytes(p.getResidentSetSize()), p.getName());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printSensors</span><span class="hljs-params">(Sensors sensors)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Sensors:&quot;</span>);<br>        System.out.format(<span class="hljs-string">&quot; CPU Temperature: %.1f°C%n&quot;</span>, sensors.getCpuTemperature());<br>        System.out.println(<span class="hljs-string">&quot; Fan Speeds: &quot;</span> + Arrays.toString(sensors.getFanSpeeds()));<br>        System.out.format(<span class="hljs-string">&quot; CPU Voltage: %.1fV%n&quot;</span>, sensors.getCpuVoltage());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printPowerSources</span><span class="hljs-params">(PowerSource[] powerSources)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;Power: &quot;</span>);<br>        <span class="hljs-keyword">if</span> (powerSources.length == <span class="hljs-number">0</span>) &#123;<br>            sb.append(<span class="hljs-string">&quot;Unknown&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">double</span> <span class="hljs-variable">timeRemaining</span> <span class="hljs-operator">=</span> powerSources[<span class="hljs-number">0</span>].getTimeRemaining();<br>            <span class="hljs-keyword">if</span> (timeRemaining &lt; -<span class="hljs-number">1d</span>) &#123;<br>                sb.append(<span class="hljs-string">&quot;Charging&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (timeRemaining &lt; <span class="hljs-number">0d</span>) &#123;<br>                sb.append(<span class="hljs-string">&quot;Calculating time remaining&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                sb.append(String.format(<span class="hljs-string">&quot;%d:%02d remaining&quot;</span>, (<span class="hljs-type">int</span>) (timeRemaining / <span class="hljs-number">3600</span>),<br>                        (<span class="hljs-type">int</span>) (timeRemaining / <span class="hljs-number">60</span>) % <span class="hljs-number">60</span>));<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (PowerSource pSource : powerSources) &#123;<br>            sb.append(String.format(<span class="hljs-string">&quot;%n %s @ %.1f%%&quot;</span>, pSource.getName(), pSource.getRemainingCapacity() * <span class="hljs-number">100d</span>));<br>        &#125;<br>        System.out.println(sb.toString());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printDisks</span><span class="hljs-params">(HWDiskStore[] diskStores)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Disks:&quot;</span>);<br>        <span class="hljs-keyword">for</span> (HWDiskStore disk : diskStores) &#123;<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">readwrite</span> <span class="hljs-operator">=</span> disk.getReads() &gt; <span class="hljs-number">0</span> || disk.getWrites() &gt; <span class="hljs-number">0</span>;<br>            System.out.format(<span class="hljs-string">&quot; %s: (model: %s - S/N: %s) size: %s, reads: %s (%s), writes: %s (%s), xfer: %s ms%n&quot;</span>,<br>                    disk.getName(), disk.getModel(), disk.getSerial(),<br>                    disk.getSize() &gt; <span class="hljs-number">0</span> ? FormatUtil.formatBytesDecimal(disk.getSize()) : <span class="hljs-string">&quot;?&quot;</span>,<br>                    readwrite ? disk.getReads() : <span class="hljs-string">&quot;?&quot;</span>, readwrite ? FormatUtil.formatBytes(disk.getReadBytes()) : <span class="hljs-string">&quot;?&quot;</span>,<br>                    readwrite ? disk.getWrites() : <span class="hljs-string">&quot;?&quot;</span>, readwrite ? FormatUtil.formatBytes(disk.getWriteBytes()) : <span class="hljs-string">&quot;?&quot;</span>,<br>                    readwrite ? disk.getTransferTime() : <span class="hljs-string">&quot;?&quot;</span>);<br>            HWPartition[] partitions = disk.getPartitions();<br>            <span class="hljs-keyword">if</span> (partitions == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-comment">// TODO Remove when all OS&#x27;s implemented</span><br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span> (HWPartition part : partitions) &#123;<br>                System.out.format(<span class="hljs-string">&quot; |-- %s: %s (%s) Maj:Min=%d:%d, size: %s%s%n&quot;</span>, part.getIdentification(),<br>                        part.getName(), part.getType(), part.getMajor(), part.getMinor(),<br>                        FormatUtil.formatBytesDecimal(part.getSize()),<br>                        part.getMountPoint().isEmpty() ? <span class="hljs-string">&quot;&quot;</span> : <span class="hljs-string">&quot; @ &quot;</span> + part.getMountPoint());<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printFileSystem</span><span class="hljs-params">(FileSystem fileSystem)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;File System:&quot;</span>);<br><br>        System.out.format(<span class="hljs-string">&quot; File Descriptors: %d/%d%n&quot;</span>, fileSystem.getOpenFileDescriptors(),<br>                fileSystem.getMaxFileDescriptors());<br><br>        OSFileStore[] fsArray = fileSystem.getFileStores();<br>        <span class="hljs-keyword">for</span> (OSFileStore fs : fsArray) &#123;<br>            <span class="hljs-type">long</span> <span class="hljs-variable">usable</span> <span class="hljs-operator">=</span> fs.getUsableSpace();<br>            <span class="hljs-type">long</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> fs.getTotalSpace();<br>            System.out.format(<br>                    <span class="hljs-string">&quot; %s (%s) [%s] %s of %s free (%.1f%%) is %s &quot;</span><br>                            + (fs.getLogicalVolume() != <span class="hljs-literal">null</span> &amp;&amp; fs.getLogicalVolume().length() &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;[%s]&quot;</span> : <span class="hljs-string">&quot;%s&quot;</span>)<br>                            + <span class="hljs-string">&quot; and is mounted at %s%n&quot;</span>,<br>                    fs.getName(), fs.getDescription().isEmpty() ? <span class="hljs-string">&quot;file system&quot;</span> : fs.getDescription(), fs.getType(),<br>                    FormatUtil.formatBytes(usable), FormatUtil.formatBytes(fs.getTotalSpace()), <span class="hljs-number">100d</span> * usable / total,<br>                    fs.getVolume(), fs.getLogicalVolume(), fs.getMount());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printNetworkInterfaces</span><span class="hljs-params">(NetworkIF[] networkIFs)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Network interfaces:&quot;</span>);<br>        <span class="hljs-keyword">for</span> (NetworkIF net : networkIFs) &#123;<br>            System.out.format(<span class="hljs-string">&quot; Name: %s (%s)%n&quot;</span>, net.getName(), net.getDisplayName());<br>            System.out.format(<span class="hljs-string">&quot;   MAC Address: %s %n&quot;</span>, net.getMacaddr());<br>            System.out.format(<span class="hljs-string">&quot;   MTU: %s, Speed: %s %n&quot;</span>, net.getMTU(), FormatUtil.formatValue(net.getSpeed(), <span class="hljs-string">&quot;bps&quot;</span>));<br>            System.out.format(<span class="hljs-string">&quot;   IPv4: %s %n&quot;</span>, Arrays.toString(net.getIPv4addr()));<br>            System.out.format(<span class="hljs-string">&quot;   IPv6: %s %n&quot;</span>, Arrays.toString(net.getIPv6addr()));<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasData</span> <span class="hljs-operator">=</span> net.getBytesRecv() &gt; <span class="hljs-number">0</span> || net.getBytesSent() &gt; <span class="hljs-number">0</span> || net.getPacketsRecv() &gt; <span class="hljs-number">0</span><br>                    || net.getPacketsSent() &gt; <span class="hljs-number">0</span>;<br>            System.out.format(<span class="hljs-string">&quot;   Traffic: received %s/%s%s; transmitted %s/%s%s %n&quot;</span>,<br>                    hasData ? net.getPacketsRecv() + <span class="hljs-string">&quot; packets&quot;</span> : <span class="hljs-string">&quot;?&quot;</span>,<br>                    hasData ? FormatUtil.formatBytes(net.getBytesRecv()) : <span class="hljs-string">&quot;?&quot;</span>,<br>                    hasData ? <span class="hljs-string">&quot; (&quot;</span> + net.getInErrors() + <span class="hljs-string">&quot; err)&quot;</span> : <span class="hljs-string">&quot;&quot;</span>,<br>                    hasData ? net.getPacketsSent() + <span class="hljs-string">&quot; packets&quot;</span> : <span class="hljs-string">&quot;?&quot;</span>,<br>                    hasData ? FormatUtil.formatBytes(net.getBytesSent()) : <span class="hljs-string">&quot;?&quot;</span>,<br>                    hasData ? <span class="hljs-string">&quot; (&quot;</span> + net.getOutErrors() + <span class="hljs-string">&quot; err)&quot;</span> : <span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printNetworkParameters</span><span class="hljs-params">(NetworkParams networkParams)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Network parameters:&quot;</span>);<br>        System.out.format(<span class="hljs-string">&quot; Host name: %s%n&quot;</span>, networkParams.getHostName());<br>        System.out.format(<span class="hljs-string">&quot; Domain name: %s%n&quot;</span>, networkParams.getDomainName());<br>        System.out.format(<span class="hljs-string">&quot; DNS servers: %s%n&quot;</span>, Arrays.toString(networkParams.getDnsServers()));<br>        System.out.format(<span class="hljs-string">&quot; IPv4 Gateway: %s%n&quot;</span>, networkParams.getIpv4DefaultGateway());<br>        System.out.format(<span class="hljs-string">&quot; IPv6 Gateway: %s%n&quot;</span>, networkParams.getIpv6DefaultGateway());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printDisplays</span><span class="hljs-params">(Display[] displays)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Displays:&quot;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (Display display : displays) &#123;<br>            System.out.println(<span class="hljs-string">&quot; Display &quot;</span> + i + <span class="hljs-string">&quot;:&quot;</span>);<br>            System.out.println(display.toString());<br>            i++;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printUsbDevices</span><span class="hljs-params">(UsbDevice[] usbDevices)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;USB Devices:&quot;</span>);<br>        <span class="hljs-keyword">for</span> (UsbDevice usbDevice : usbDevices) &#123;<br>            System.out.println(usbDevice.toString());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="三、结果"><a href="#三、结果" class="headerlink" title="三、结果"></a>三、结果</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs nix">Microsoft Windows <span class="hljs-number">10</span> build <span class="hljs-number">15063</span><br><span class="hljs-params">manufacturer:</span> LENOVO<br><span class="hljs-params">model:</span> <span class="hljs-number">80</span>RU<br><span class="hljs-params">serialnumber:</span> R90LN08UR9N0B6922009<br><span class="hljs-params">firmware:</span><br>  <span class="hljs-params">manufacturer:</span> LENOVO<br>  <span class="hljs-params">name:</span> E5CN53WW<br>  <span class="hljs-params">description:</span> E5CN53WW<br>  <span class="hljs-params">version:</span> LENOVO <span class="hljs-operator">-</span> <span class="hljs-number">0</span><br>  release <span class="hljs-params">date:</span> <span class="hljs-number">07</span><span class="hljs-symbol">/11/2016</span><br><span class="hljs-params">baseboard:</span><br>  <span class="hljs-params">manufacturer:</span> LENOVO<br>  <span class="hljs-params">model:</span> unknown<br>  <span class="hljs-params">version:</span> SDK0K09938 WIN<br>  <span class="hljs-params">serialnumber:</span> R90LN08U<br>Intel(R) Core(TM) i5-<span class="hljs-number">6300</span>HQ CPU @ <span class="hljs-number">2.30</span>GHz<br> <span class="hljs-number">1</span> physical CPU package(s)<br> <span class="hljs-number">4</span> physical CPU core(s)<br> <span class="hljs-number">4</span> logical CPU(s)<br><span class="hljs-params">Identifier:</span> Intel64 Family <span class="hljs-number">6</span> Model <span class="hljs-number">94</span> Stepping <span class="hljs-number">3</span><br><span class="hljs-params">ProcessorID:</span> BFEBFBFF000506E3<br><span class="hljs-params">Memory:</span> <span class="hljs-number">1.5</span> GiB<span class="hljs-symbol">/7.8</span> GiB<br>Swap <span class="hljs-params">used:</span> <span class="hljs-number">84.4</span> MiB<span class="hljs-symbol">/6.3</span> GiB<br><span class="hljs-params">Uptime:</span> <span class="hljs-number">1</span> days, <span class="hljs-number">11</span>:<span class="hljs-number">45</span>:<span class="hljs-number">25</span><br>Context Switches<span class="hljs-operator">/</span><span class="hljs-params">Interrupts:</span> <span class="hljs-number">648525190</span> <span class="hljs-symbol">/</span> <span class="hljs-number">338012494</span><br>CPU, IOWait, and IRQ ticks @ <span class="hljs-number">0</span> sec:[<span class="hljs-number">18421421</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10068431</span>, <span class="hljs-number">288934828</span>, <span class="hljs-number">0</span>, <span class="hljs-number">266351</span>, <span class="hljs-number">143296</span>, <span class="hljs-number">0</span>]<br>CPU, IOWait, and IRQ ticks @ <span class="hljs-number">1</span> sec:[<span class="hljs-number">18421578</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10068486</span>, <span class="hljs-number">288938671</span>, <span class="hljs-number">0</span>, <span class="hljs-number">266351</span>, <span class="hljs-number">143304</span>, <span class="hljs-number">0</span>]<br><span class="hljs-params">User:</span> <span class="hljs-number">3.9</span>% <span class="hljs-params">Nice:</span> <span class="hljs-number">0.0</span>% <span class="hljs-params">System:</span> <span class="hljs-number">1.4</span>% <span class="hljs-params">Idle:</span> <span class="hljs-number">94.6</span>% <span class="hljs-params">IOwait:</span> <span class="hljs-number">0.0</span>% <span class="hljs-params">IRQ:</span> <span class="hljs-number">0.0</span>% <span class="hljs-params">SoftIRQ:</span> <span class="hljs-number">0.2</span>% <span class="hljs-params">Steal:</span> <span class="hljs-number">0.0</span>%<br>CPU <span class="hljs-params">load:</span> <span class="hljs-number">13.0</span>% (counting ticks)<br>CPU <span class="hljs-params">load:</span> <span class="hljs-number">17.4</span>% (OS MXBean)<br>CPU load <span class="hljs-params">averages:</span> N<span class="hljs-symbol">/A</span> N<span class="hljs-symbol">/A</span> N<span class="hljs-symbol">/A</span><br>CPU load per <span class="hljs-params">processor:</span> <span class="hljs-number">19.3</span>% <span class="hljs-number">12.8</span>% <span class="hljs-number">12.8</span>% <span class="hljs-number">12.8</span>%<br><span class="hljs-params">Processes:</span> <span class="hljs-number">184</span>, <span class="hljs-params">Threads:</span> <span class="hljs-number">2447</span><br>   PID  %CPU %MEM       VSZ       RSS Name<br>     <span class="hljs-number">0</span> <span class="hljs-number">100.0</span>  <span class="hljs-number">0.0</span>    <span class="hljs-number">64</span> KiB     <span class="hljs-number">8</span> KiB System Idle Process<br>  <span class="hljs-number">5416</span>  <span class="hljs-number">10.0</span>  <span class="hljs-number">1.6</span>   <span class="hljs-number">3.4</span> GiB <span class="hljs-number">130.4</span> MiB java.exe<br> <span class="hljs-number">12676</span>   <span class="hljs-number">8.8</span>  <span class="hljs-number">1.3</span>   <span class="hljs-number">2.1</span> GiB <span class="hljs-number">104.9</span> MiB java.exe<br> <span class="hljs-number">11988</span>   <span class="hljs-number">5.8</span> <span class="hljs-number">16.8</span>   <span class="hljs-number">3.3</span> GiB   <span class="hljs-number">1.3</span> GiB idea64.exe<br>  <span class="hljs-number">5312</span>   <span class="hljs-number">4.4</span>  <span class="hljs-number">1.3</span>   <span class="hljs-number">2.0</span> TiB <span class="hljs-number">101.4</span> MiB chrome.exe<br><span class="hljs-params">Sensors:</span><br> CPU <span class="hljs-params">Temperature:</span> <span class="hljs-number">42.0</span>°C<br> Fan <span class="hljs-params">Speeds:</span> [<span class="hljs-number">0</span>]<br> CPU <span class="hljs-params">Voltage:</span> <span class="hljs-number">0.0</span>V<br><span class="hljs-params">Power:</span> Charging<br> System Battery @ <span class="hljs-number">96.6</span>%<br><span class="hljs-params">Disks:</span><br> \\.\<span class="hljs-params">PHYSICALDRIVE0:</span> (<span class="hljs-params">model:</span> SanDisk SD7SN6S128G (标准磁盘驱动器) <span class="hljs-operator">-</span> S<span class="hljs-operator">/</span><span class="hljs-params">N:</span> <span class="hljs-number">161416401094</span>) <span class="hljs-params">size:</span> <span class="hljs-number">128.0</span> GB, <span class="hljs-params">reads:</span> <span class="hljs-number">1117123</span> (<span class="hljs-number">33.4</span> GiB), <span class="hljs-params">writes:</span> <span class="hljs-number">703948</span> (<span class="hljs-number">21.2</span> GiB), <span class="hljs-params">xfer:</span> <span class="hljs-number">2570354</span> ms<br> |-- 磁盘 <span class="hljs-comment">#0，分区 #0: GPT: Basic Data (GPT: 基本数据) Maj:Min=0:0, size: 471.9 MB @ F:\</span><br> |-- 磁盘 <span class="hljs-comment">#0，分区 #1: GPT: System (GPT: 系统) Maj:Min=0:1, size: 104.9 MB</span><br> |-- 磁盘 <span class="hljs-comment">#0，分区 #2: GPT: Basic Data (GPT: 基本数据) Maj:Min=0:2, size: 126.6 GB @ C:\</span><br> |-- 磁盘 <span class="hljs-comment">#0，分区 #3: GPT: Basic Data (GPT: 基本数据) Maj:Min=0:3, size: 845.2 MB @ G:\</span><br> \\.\<span class="hljs-params">PHYSICALDRIVE1:</span> (<span class="hljs-params">model:</span> WDC WD10SPCX-<span class="hljs-number">24</span>HWST1 (标准磁盘驱动器) <span class="hljs-operator">-</span> S<span class="hljs-operator">/</span><span class="hljs-params">N:</span>      WD-WX31A86F35XC) <span class="hljs-params">size:</span> <span class="hljs-number">1.0</span> TB, <span class="hljs-params">reads:</span> <span class="hljs-number">379263</span> (<span class="hljs-number">6.0</span> GiB), <span class="hljs-params">writes:</span> <span class="hljs-number">103105</span> (<span class="hljs-number">2.6</span> GiB), <span class="hljs-params">xfer:</span> <span class="hljs-number">4014792</span> ms<br> |-- 磁盘 <span class="hljs-comment">#1，分区 #0: GPT: Basic Data (GPT: 基本数据) Maj:Min=1:0, size: 475.9 GB @ D:\</span><br> |-- 磁盘 <span class="hljs-comment">#1，分区 #1: GPT: Basic Data (GPT: 基本数据) Maj:Min=1:1, size: 524.3 GB @ E:\</span><br>File <span class="hljs-params">System:</span><br> File <span class="hljs-params">Descriptors:</span> <span class="hljs-number">0</span><span class="hljs-symbol">/0</span><br> 本地固定磁盘 (F:) (Fixed drive) [NTFS] <span class="hljs-number">436.1</span> MiB of <span class="hljs-number">450.0</span> MiB free (<span class="hljs-number">96.9</span>%) is \\<span class="hljs-operator">?</span>\Volume&#123;<span class="hljs-number">9</span>afc85a4-<span class="hljs-number">9</span>f44-<span class="hljs-number">11</span>e7-ab77-a5dc01376557&#125;\  and is mounted at F:\<br> 本地固定磁盘 (C:) (Fixed drive) [NTFS] <span class="hljs-number">12.9</span> GiB of <span class="hljs-number">117.9</span> GiB free (<span class="hljs-number">11.0</span>%) is \\<span class="hljs-operator">?</span>\Volume&#123;<span class="hljs-number">01</span>a1a160-fbb4-<span class="hljs-number">49</span>c7-be19-<span class="hljs-number">6</span>dd52882bcbc&#125;\  and is mounted at C:\<br> 本地固定磁盘 (G:) (Fixed drive) [NTFS] <span class="hljs-number">303.4</span> MiB of <span class="hljs-number">806.0</span> MiB free (<span class="hljs-number">37.6</span>%) is \\<span class="hljs-operator">?</span>\Volume&#123;<span class="hljs-number">9</span>afc85a5-<span class="hljs-number">9</span>f44-<span class="hljs-number">11</span>e7-ab77-a5dc01376557&#125;\  and is mounted at G:\<br> 本地固定磁盘 (D:) (Fixed drive) [NTFS] <span class="hljs-number">161.8</span> GiB of <span class="hljs-number">443.2</span> GiB free (<span class="hljs-number">36.5</span>%) is \\<span class="hljs-operator">?</span>\Volume&#123;a287f045-a9ac-<span class="hljs-number">466</span>9-ab44-bdbd74692600&#125;\  and is mounted at D:\<br> 本地固定磁盘 (E:) (Fixed drive) [NTFS] <span class="hljs-number">246.0</span> GiB of <span class="hljs-number">488.3</span> GiB free (<span class="hljs-number">50.4</span>%) is \\<span class="hljs-operator">?</span>\Volume&#123;<span class="hljs-number">84</span>c6da35-<span class="hljs-number">38</span>e7-<span class="hljs-number">457</span>e-b528-c12da6ed2898&#125;\  and is mounted at E:\<br>Network <span class="hljs-params">interfaces:</span><br> <span class="hljs-params">Name:</span> wlan0 (Microsoft Wi-Fi Direct Virtual Adapter)<br>   MAC <span class="hljs-params">Address:</span> <span class="hljs-number">84</span>:ef:<span class="hljs-number">18</span>:<span class="hljs-number">36</span>:<span class="hljs-number">4</span>c:ab <br>   <span class="hljs-params">MTU:</span> <span class="hljs-number">1500</span>, <span class="hljs-params">Speed:</span> <span class="hljs-number">0</span> bps <br>   <span class="hljs-params">IPv4:</span> [] <br>   <span class="hljs-params">IPv6:</span> [fe80:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">55</span>ed:<span class="hljs-number">790</span>e:b70:ea43] <br>   <span class="hljs-params">Traffic:</span> received <span class="hljs-operator">?</span><span class="hljs-operator">/</span><span class="hljs-operator">?</span>; transmitted <span class="hljs-operator">?</span><span class="hljs-operator">/</span><span class="hljs-operator">?</span> <br> <span class="hljs-params">Name:</span> net2 (Microsoft Teredo Tunneling Adapter)<br>   MAC <span class="hljs-params">Address:</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:e0 <br>   <span class="hljs-params">MTU:</span> <span class="hljs-number">1280</span>, <span class="hljs-params">Speed:</span> <span class="hljs-number">100</span> Kbps <br>   <span class="hljs-params">IPv4:</span> [] <br>   <span class="hljs-params">IPv6:</span> [<span class="hljs-number">2001</span>:<span class="hljs-number">0</span>:<span class="hljs-number">9</span>d38:<span class="hljs-number">6</span>ab8:<span class="hljs-number">2446</span>:<span class="hljs-number">2</span>d3f:<span class="hljs-number">34</span>a2:<span class="hljs-number">86</span>f5, fe80:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">2446</span>:<span class="hljs-number">2</span>d3f:<span class="hljs-number">34</span>a2:<span class="hljs-number">86</span>f5] <br>   <span class="hljs-params">Traffic:</span> received <span class="hljs-number">15</span> packets<span class="hljs-symbol">/2.2</span> KiB (<span class="hljs-number">0</span> err); transmitted <span class="hljs-number">1580</span> packets<span class="hljs-symbol">/209.9</span> KiB (<span class="hljs-number">0</span> err) <br> <span class="hljs-params">Name:</span> eth7 (Realtek PCIe GBE Family Controller)<br>   MAC <span class="hljs-params">Address:</span> <span class="hljs-number">54</span>:ee:<span class="hljs-number">75</span>:b0:ed:<span class="hljs-number">33</span> <br>   <span class="hljs-params">MTU:</span> <span class="hljs-number">1500</span>, <span class="hljs-params">Speed:</span> <span class="hljs-number">0</span> bps <br>   <span class="hljs-params">IPv4:</span> [] <br>   <span class="hljs-params">IPv6:</span> [fe80:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:d0:cff0:<span class="hljs-number">250</span>f:<span class="hljs-number">34</span>d0] <br>   <span class="hljs-params">Traffic:</span> received <span class="hljs-operator">?</span><span class="hljs-operator">/</span><span class="hljs-operator">?</span>; transmitted <span class="hljs-operator">?</span><span class="hljs-operator">/</span><span class="hljs-operator">?</span> <br> <span class="hljs-params">Name:</span> wlan2 (Intel(R) Dual Band Wireless-AC <span class="hljs-number">3165</span>)<br>   MAC <span class="hljs-params">Address:</span> <span class="hljs-number">84</span>:ef:<span class="hljs-number">18</span>:<span class="hljs-number">36</span>:<span class="hljs-number">4</span>c:aa <br>   <span class="hljs-params">MTU:</span> <span class="hljs-number">1500</span>, <span class="hljs-params">Speed:</span> <span class="hljs-number">72.2</span> Mbps <br>   <span class="hljs-params">IPv4:</span> [<span class="hljs-number">172.16</span>.<span class="hljs-number">3.132</span>] <br>   <span class="hljs-params">IPv6:</span> [] <br>   <span class="hljs-params">Traffic:</span> received <span class="hljs-number">99670</span> packets<span class="hljs-symbol">/87.7</span> MiB (<span class="hljs-number">0</span> err); transmitted <span class="hljs-number">68049</span> packets<span class="hljs-symbol">/14.9</span> MiB (<span class="hljs-number">0</span> err) <br>Network <span class="hljs-params">parameters:</span><br> Host <span class="hljs-params">name:</span> Sindrol-NTB<br> Domain <span class="hljs-params">name:</span> Sindrol-NTB<br> DNS <span class="hljs-params">servers:</span> [<span class="hljs-number">202.106</span>.<span class="hljs-number">0.20</span>, <span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span>]<br> IPv4 <span class="hljs-params">Gateway:</span> <span class="hljs-number">172.16</span>.<span class="hljs-number">3.254</span><br> IPv6 <span class="hljs-params">Gateway:</span> ::<br><span class="hljs-params">Displays:</span><br> Display <span class="hljs-number">0</span>:<br>  Manuf. ID<span class="hljs-operator">=</span>BOE, Product ID<span class="hljs-operator">=</span><span class="hljs-number">65</span>d, Digital, Serial<span class="hljs-operator">=</span><span class="hljs-number">00000000</span>, ManufDate<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">2015</span>, EDID v1.<span class="hljs-number">4</span><br>  <span class="hljs-number">34</span> x <span class="hljs-number">19</span> cm (<span class="hljs-number">13.4</span> x <span class="hljs-number">7.5</span> <span class="hljs-keyword">in</span>)<br>  Preferred <span class="hljs-params">Timing:</span> Clock <span class="hljs-number">141</span>MHz, Active Pixels <span class="hljs-number">1920</span>x1080 <br>  Manufacturer <span class="hljs-params">Data:</span> <span class="hljs-number">000000000000000000000000000000000000</span><br>  Unspecified <span class="hljs-params">Text:</span> BOE HF<br>  Unspecified <span class="hljs-params">Text:</span> NV156FHM-N42<br> Display <span class="hljs-number">1</span>:<br>  Manuf. ID<span class="hljs-operator">=</span>AOC, Product ID<span class="hljs-operator">=</span><span class="hljs-number">2476</span>, Digital, Serial<span class="hljs-operator">=</span><span class="hljs-number">00000319</span>, ManufDate<span class="hljs-operator">=</span><span class="hljs-number">5</span><span class="hljs-operator">/</span><span class="hljs-number">2016</span>, EDID v1.<span class="hljs-number">3</span><br>  <span class="hljs-number">52</span> x <span class="hljs-number">29</span> cm (<span class="hljs-number">20.5</span> x <span class="hljs-number">11.4</span> <span class="hljs-keyword">in</span>)<br>  Preferred <span class="hljs-params">Timing:</span> Clock <span class="hljs-number">148</span>MHz, Active Pixels <span class="hljs-number">1920</span>x1080 <br>  Range <span class="hljs-params">Limits:</span> Field Rate <span class="hljs-number">5</span>0-<span class="hljs-number">76</span> Hz vertical, <span class="hljs-number">3</span>0-<span class="hljs-number">83</span> Hz horizontal, Max <span class="hljs-params">clock:</span> <span class="hljs-number">170</span> MHz<br>  Monitor <span class="hljs-params">Name:</span> <span class="hljs-number">2476</span>WM<br>  Serial <span class="hljs-params">Number:</span> E71G5BA000793<br>USB <span class="hljs-params">Devices:</span><br> Intel(R) USB <span class="hljs-number">3.0</span> 可扩展主机控制器 <span class="hljs-operator">-</span> <span class="hljs-number">1.0</span> (Microsoft) (通用 USB xHCI 主机控制器)<br> |-- USB 根集线器(USB <span class="hljs-number">3.0</span>) ((标准 USB 集线器))<br>     |-- Apple Mobile Device USB Driver (Apple, Inc.)<br>         |-- Apple iPhone (Apple Inc.)<br>     |-- USB Composite Device ((标准 USB 主控制器))<br>         |-- Lenovo EasyCamera (Bison)<br>     |-- USB Composite Device ((标准 USB 主控制器))<br>         |-- USB 输入设备 ((标准系统设备))<br>             |-- HID Keyboard Device ((标准键盘))<br>         |-- USB 输入设备 ((标准系统设备))<br>             |-- HID-compliant mouse (Microsoft)<br>             |-- 符合 HID 标准的供应商定义设备 ((标准系统设备))<br>             |-- 符合 HID 标准的用户控制设备 (Microsoft)<br>             |-- 符合 HID 标准的系统控制器 ((标准系统设备))<br>         |-- USB 输入设备 ((标准系统设备))<br>             |-- 符合 HID 标准的供应商定义设备 ((标准系统设备))<br>     |-- USB 输入设备 ((标准系统设备))<br>         |-- HID-compliant mouse (Microsoft)<br>     |-- 英特尔(R) 无线 Bluetooth(R) (Intel Corporation)<br></code></pre></td></tr></table></figure>]]>
    </content>
    <id>http://ysocket.pages.dev/2022/03/18/oshi-sample/</id>
    <link href="http://ysocket.pages.dev/2022/03/18/oshi-sample/"/>
    <published>2022-03-18T07:27:00.000Z</published>
    <summary>
      <![CDATA[<h5 id="一、引入jar包"><a href="#一、引入jar包" class="headerlink" title="一、引入jar包"></a>一、引入jar包</h5><p>　　本项目主要使用第开源jar包：<a href="https://github.com/oshi/oshi">https://github.com/oshi/oshi</a><br>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.github.oshi/oshi-core --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.oshi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>oshi-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></p>]]>
    </summary>
    <title>JAVA通过oshi获取系统和硬件信息</title>
    <updated>2025-05-16T14:43:16.190Z</updated>
  </entry>
  <entry>
    <author>
      <name>YSocket</name>
    </author>
    <content>
      <![CDATA[<p>首先，先说一下。老外提出了一个缓存更新套路，名为《Cache-Aside pattern》。其中就指出</p><ul><li>失效：应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。</li><li>命中：应用程序从cache中取数据，取到后返回。</li><li>更新：先把数据存到数据库中，成功后，再让缓存失效。</li></ul><span id="more"></span><p>另外，知名社交网站facebook也在论文《Scaling Memcache at Facebook》中提出，他们用的也是先更新数据库，再删缓存的策略。</p><p>这种情况不存在并发问题么？</p><p>不是的。假设这会有两个请求，一个请求A做查询操作，一个请求B做更新操作，那么会有如下情形产生</p><ul><li>缓存刚好失效</li><li>请求A查询数据库，得一个旧值</li><li>请求B将新值写入数据库</li><li>请求B删除缓存</li><li>请求A将查到的旧值写入缓存<br>ok，如果发生上述情况，确实是会发生脏数据。</li></ul><p>然而，发生这种情况的概率又有多少呢？</p><p>发生上述情况有一个先天性条件，就是步骤（3）的写数据库操作比步骤（2）的读数据库操作耗时更短，才有可能使得步骤（4）先于步骤（5）。可是，大家想想，数据库的读操作的速度远快于写操作的（不然做读写分离干嘛，做读写分离的意义就是因为读操作比较快，耗资源少），因此步骤（3）耗时比步骤（2）更短，这一情形很难出现。</p><p>假设，有人非要抬杠，有强迫症，一定要解决怎么办？</p><h5 id="如何解决上述并发问题？"><a href="#如何解决上述并发问题？" class="headerlink" title="如何解决上述并发问题？"></a>如何解决上述并发问题？</h5><p>首先，给缓存设有效时间是一种方案。其次，采用策略（2）里给出的异步延时删除策略，保证读请求完成以后，再进行删除操作。</p><h5 id="还有其他造成不一致的原因么？"><a href="#还有其他造成不一致的原因么？" class="headerlink" title="还有其他造成不一致的原因么？"></a>还有其他造成不一致的原因么？</h5><p>有的，这也是缓存更新策略（2）和缓存更新策略（3）都存在的一个问题，如果删缓存失败了怎么办，那不是会有不一致的情况出现么。比如一个写数据请求，然后写入数据库了，删缓存失败了，这会就出现不一致的情况了。这也是缓存更新策略（2）里留下的最后一个疑问。</p><p>如何解决？</p><p>提供一个保障的重试机制即可，这里给出两套方案。</p><h5 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h5><p>如下图所示</p><p><img src="/images/pasted-1.png" alt="upload1"></p><p>流程如下所示</p><ul><li>更新数据库数据；</li><li>缓存因为种种问题删除失败</li><li>将需要删除的key发送至消息队列</li><li>自己消费消息，获得需要删除的key</li><li>继续重试删除操作，直到成功</li></ul><p>然而，该方案有一个缺点，对业务线代码造成大量的侵入。于是有了方案二，在方案二中，启动一个订阅程序去订阅数据库的binlog，获得需要操作的数据。在应用程序中，另起一段程序，获得这个订阅程序传来的信息，进行删除缓存操作。</p><h5 id="方案二："><a href="#方案二：" class="headerlink" title="方案二："></a>方案二：</h5><p><img src="/images/pasted-2.png" alt="upload successful"></p><p>流程如下图所示：</p><p>更新数据库数据</p><ul><li>数据库会将操作信息写入binlog日志当中</li><li>订阅程序提取出所需要的数据以及key</li><li>另起一段非业务代码，获得该信息</li><li>尝试删除缓存操作，发现删除失败</li><li>将这些信息发送至消息队列</li><li>重新从消息队列中获得该数据，重试操作。</li></ul><p> <a href="https://www.cnblogs.com/xiaoxiao1120/p/15255541.html">https://www.cnblogs.com/xiaoxiao1120/p/15255541.html</a></p>]]>
    </content>
    <id>http://ysocket.pages.dev/2022/03/12/Cache-Aside-pattern/</id>
    <link href="http://ysocket.pages.dev/2022/03/12/Cache-Aside-pattern/"/>
    <published>2022-03-12T07:20:29.000Z</published>
    <summary>
      <![CDATA[<p>首先，先说一下。老外提出了一个缓存更新套路，名为《Cache-Aside pattern》。其中就指出</p>
<ul>
<li>失效：应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。</li>
<li>命中：应用程序从cache中取数据，取到后返回。</li>
<li>更新：先把数据存到数据库中，成功后，再让缓存失效。</li>
</ul>]]>
    </summary>
    <title>Cache-Aside pattern</title>
    <updated>2025-05-16T14:43:16.187Z</updated>
  </entry>
</feed>
